!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.widget_ya=t():e.widget_ya=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=98)}([function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t,n,i){var r,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(a<3?r(s):a>3?r(t,n,s):r(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s}},function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(63),t),i(n(64),t)},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a});var o=n(6);Object(o.updateSettings)({project:"messenger-widget",version:"1.42.0",env:"production"});var i=o.updateSettings,r=function(e){try{e()}catch(e){throw Object(o.logError)(e),e}};function a(e,t,n){var o=n.value;return n.value=function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];r(function(){o.apply(e,n)})},n}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){return function(t,n){var r=i.prefix+e;"string"==typeof t&&(r+="__"+t);var a=[r],s={};return"object"===(void 0===t?"undefined":o(t))?s=t:"object"===(void 0===n?"undefined":o(n))&&(s=n),function(e){return Object.keys(e).filter(function(t){var n=e[t];return n||0===n}).map(function(t){var n=t.trim(),o=e[t];return!0===o?"_"+n:"_"+n+"_"+o})}(s).forEach(function(e){a.push(r+e)}),a.join(" ")}}function r(e,t,n){return i(e)(t,n).split(" ").pop()||""}i.prefix="ya-chat-"},function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(49),t),i(n(50),t),i(n(51),t),i(n(52),t),i(n(53),t),i(n(54),t),i(n(56),t),i(n(57),t),i(n(58),t),i(n(59),t),i(n(20),t),i(n(60),t),i(n(61),t),i(n(62),t)},function(e,t,n){"use strict";n.d(t,"a",function(){return w}),n.d(t,"b",function(){return x});var o="undefined"!=typeof document,i="undefined"!=typeof window,r="undefined"!=typeof navigator,a="undefined"!=typeof screen;function s(){return i&&window.location?window.location.href:""}function c(){return o?document.referrer:""}function l(e,t){return(e||"").slice(0,t)}function u(){return Math.floor(1e6*Math.random())}var d=512;function h(e,t,n){(n||0===n)&&e.push(t+":"+(!0===n?"1":n))}function p(e,t){var n=[];return e&&Object.keys(e).forEach(function(t){return h(n,t,e[t])}),h(n,"rn",u()),h(n,"c",!!r&&navigator.cookieEnabled),h(n,"s",a?[screen.width,screen.height,screen.colorDepth].join("x"):""),h(n,"en",o&&"string"==typeof document.charset?document.charset.toLowerCase():""),h(n,"t",l(t,d)),n.join(":")}var f=1024;function y(e){return l(e,f)}function b(e,t){var n,o="https://mc.yandex.ru/watch/"+e+"?"+(n=t,Object.keys(n).filter(function(e){var t=n[e];return""!==t&&null!=t}).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"));"undefined"!=typeof navigator&&navigator.sendBeacon?navigator.sendBeacon(o," "):"undefined"!=typeof fetch?fetch(o,{credentials:"include"}):"undefined"!=typeof Image&&((new Image).src=o)}function v(e){var t=e.browserInfo,n=e.counterId,o=e.pageParams,i=e.userVars,r={"browser-info":p(t,o.title),rn:u(),ut:o.ut};o.url&&(r["page-url"]=y(o.url)),o.referrer&&(r["page-ref"]=y(o.referrer)),i&&(r["site-info"]=JSON.stringify(i)),b(n,r)}function m(e,t,n){v({counterId:e,pageParams:{referrer:t&&void 0!==t.referrer?t.referrer:c(),title:t&&void 0!==t.title?t.title:o?document.title:"",url:t&&void 0!==t.url?t.url:s()},userVars:n})}function g(e,t,n){var o,r;t?(o=s(),r="goal://"+(i&&window.location?window.location.hostname:"")+"/"+t):(o=c(),r=s()),v({counterId:e,pageParams:{referrer:o,url:r},userVars:n})}var _="52122583";function w(e,t){m(_,e,t)}function x(e,t){g(_,e,t)}},function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(15),t),i(n(19),t),i(n(48),t)},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return c});var o=!1;try{document.createEvent("TouchEvent"),o=!0}catch(e){}var i=Math.max(window.screen.width,window.screen.height)<900;var r=window.navigator.userAgent,a=o&&(i||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)),s=function(e){return/iPad|iPhone|iPod/.test(e)}(r),c=function(e){return/^((?!chrome|android).)*safari/i.test(e)}(r)},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var o={"widget-error-button-color":!0,"widget-error-text-color":!0,"widget-spinner-color":!0,"widget-loader-background-color":!0,"widget-button-offset-right":!0,"widget-button-offset-bottom":!0},i=function(e,t){Object.keys(t).forEach(function(n){e.style.setProperty("--yandex-mssngr-"+n,t[n])})},r=function(e){return e?Object.keys(e).reduce(function(t,n){return e[n].includes("url")?t:(t[o[n]?"widgetThemeVariables":"themeVariables"][n]=e[n],t)},{widgetThemeVariables:{},themeVariables:{}}):{}}},function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return p}),n.d(t,"a",function(){return f});var o=n(4),i=n(6);function r(e){var t=window.YandexApplicationsFeatureAvailability&&window.YandexApplicationsFeatureAvailability.getFeatureInfo(e);if("string"==typeof t)try{t=JSON.parse(t)}catch(e){Object(i.logError)(e,{message:"Can not get yandex application availability feature",additional:{featureInfo:t}}),t=void 0}return{isAvailable:Boolean(t&&t.isAvailable),params:t&&t.params}}var a=r("dialog-business"),s=r("messenger"),c="messenger://chat/list",l="messenger://chat/open",u="messenger://chat/invite_byhash",d="messenger://user";function h(e,t){var n=e.guid,i=e.chatId,r=e.inviteHash,a=s.params?s.params["available-paths"]:[];return r&&-1!==a.indexOf(u)?Object(o.queryStringify)(u,Object.assign({invite_hash:r},t)):i&&-1!==a.indexOf(l)?Object(o.queryStringify)(l,Object.assign({chat_id:i},t)):n&&a.indexOf(d)?Object(o.queryStringify)(d,Object.assign({user_id:n},t)):Object(o.queryStringify)(c,Object.assign({},t))}function p(){return s.isAvailable||a.isAvailable}function f(e,t){return s.isAvailable?h(e,t):a.isAvailable?function(e,t){var n=e.guid,i=e.iframeUrlParams;if(n)return Object(o.queryStringify)("dialog-business://",{bot_id:n,reqid:i&&i.reqid,service_id:t})}(e,t.serviceId):void 0}},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(28),i=n(29),r=n(30),a=n(31),s=n(32),c=n(33),l=n(34),u=n(35),d={ru:o,en:i,fr:r,hy:a,kk:s,sr:c,tr:l,uz:u};function h(e,t){return(d[t]||{})[e]||""}},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var o=n(0),i=n(1),r=n(4),a=n(5),s=n(7);var c=n(3),l=n(2),u="disable-page-scroll",d=void 0,h="",p="",f=0,y=0,b=300;function v(){window.clearTimeout(d)}var m=n(43),g=n(13),_=n(14),w=n(41),x=n(17),k=n(40),O=n(44),j=n(9),E=n(39),M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),T=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0};var S=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,o,i,c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.config,e));return c.inFullscreen=!1,c.deeplinker=new E.a(c.handleDeeplink),c.isBlockedIframe=(n=s.c,o=window.location.hostname,i=Object(r.getYandexTld)(o),n&&!Object(r.isCookiedYandexTld)(i)&&!Object(r.isYandexTeamHost)(o)),Object(l.a)(function(){var n,o;Object(a.a)(void 0,{build:"widget",guid:c.options.guid,serviceId:""+c.options.serviceId,workspaceId:c.options.workspaceId,version:_.a.version,nativeAvailableDialogBusiness:j.c.isAvailable,nativeAvailableMessenger:j.d.isAvailable,blockedCookie:c.isBlockedIframe,stat:"object"===M(c.options.stat)?c.options.stat:void 0,visitId:c.widgetId}),r.isServiceWorkerSupported&&navigator.serviceWorker.addEventListener("message",c.handleMessage),c.unreadCounter=new k.a(c.refs.badge,c.refs.badgeCount,c.options,c.handleUnreadCounterUpdate,function(e,t){return c.promo.updateBadge(e,t)},null===(o=(n=t.config).unreadCounterControllerFactory)||void 0===o?void 0:o.call(n,c.widgetId,c.options)),c.messageHandler.register("close",function(){return c.hideChat()}).register("counter",function(e){return c.unreadCounter.set(e)}),c.promo.addPromoRef(c.refs.promo),c.initMessengerIframe(),c.popup=new g.a({position:c.options.chatPosition,popupElem:c.refs.popup,size:c.options.size,contentWrapperElem:c.refs["popup-content-wrapper"],targetNode:c.options.popupTargetNode||c.refs.button.getNode()}),c.unreadCounter.start(),e.enableDeeplink&&!c.options.isMobile&&c.deeplinker.start()}),c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_["a"]),C(t,[{key:"createTemplate",value:function(){var e=this;this.promo=new O.a(this.options);var t=this.promo.renderPromoContent();return"hidden"!==this.options.theme&&this.onShowEntryPoint({type:"nativeButton"}),new x.a({template:Object(m.a)(Object.assign(Object.assign({},this.options),{additionalContent:t})),styles:this.options.styles,mountNode:this.options.mountNode,listeners:{button:{click:this.handleButtonClick},error:{click:this.handleOnErrorRetryClick},header:{click:this.handleHeaderClick},headerClose:{click:this.handleCloseClick},closeButton:{click:this.handleCloseClick},closePromoBtn:{click:function(){return e.promo.handleHidePromo("closeClick")}}},nonce:this.options.nonce,themeVariables:this.options.widgetThemeVariables})}},{key:"getUnreadCount",value:function(){return this.unreadCounter.value}},{key:"hideChat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isChatVisible&&(this.isChatVisible=!1,this.options.autocloseable&&document.removeEventListener("click",this.handleDocumentClick,!0),this.options.isMobile&&Object(l.a)(function(){v();var e=document.body;e.classList.remove(Object(c.b)(u)),s.a&&(e.classList.remove(Object(c.b)(u,{ios:!0})),e.style.marginLeft=h,e.style.marginTop=p,window.scrollTo(f,y))}),this.refs.widget.removeMode({visible:!0}),this.refs.button.removeMode({hidden:!0}),this.refs.paranja.removeMode({visible:!0}),this.refs.mount.removeMode({visible:!0}),this.isExternal()&&this.refs.button.removeMode({hidden:!0}),this.inFullscreen&&this.cancelFullscreen(),this.popup.hide(),this.hideLoader(),this.hideError(),this.hideClose(),this.isChatCreated||this.messengerIframe.reset(),this.emit("chatHide"),this.messengerIframe&&this.messengerIframe.blur(),e||Object(a.b)("widget-closed"))}},{key:"tryOpenNative",value:function(e,n){var o=t.config.openNative&&Object(j.a)(e,{serviceId:this.options.serviceId,clickId:n});return!!o&&(location.replace(o),Object(a.b)("widget-opened-native",{clickId:n}),!0)}},{key:"getExternalUrl",value:function(e){return this.getIframeUrl(Object.assign({botId:this.options.guid,utm_source:"widget",utm_medium:"new_tab"},e))}},{key:"openNewTab",value:function(e){return window.open(this.getExternalUrl(e))}},{key:"openPopup",value:function(e,t){var n=this.isChatCreated;n||this.createMessengerIframe(),this.iframeOpen(Object.assign(Object.assign({},e),{visitId:this.widgetId,initial:!n}),t),this.promo.handleHidePromo("showChat"),this.isChatVisible||(this.isChatVisible=!0,this.options.autocloseable&&document.addEventListener("click",this.handleDocumentClick,!0),this.options.isMobile&&(v(),d=window.setTimeout(function(){Object(l.a)(function(){var e=document.body;s.a&&(f=window.scrollX,y=window.scrollY,h=e.style.marginLeft,p=e.style.marginTop,e.style.marginLeft="-"+f+"px",e.style.marginTop="-"+y+"px",e.classList.add(Object(c.b)(u,{ios:!0}))),e.classList.add(Object(c.b)(u))})},b)),this.refs.widget.setMode({visible:!0}),this.refs.button.setMode({hidden:!0}),this.refs.paranja.setMode({visible:!0}),this.refs.mount.setMode({visible:!0}),this.isExternal()&&this.refs.header.setMode({visible:!0}),this.isChatCreated||this.isExternal()||this.refs.close.setMode({visible:!0}),this.popup.show(),this.emit("chatShow"),Object(a.b)("widget-opened",{clickId:t}))}},{key:"preload",value:function(){this.isChatCreated||this.createMessengerIframe()}},{key:"destroy",value:function(){this.destroyed||(this.hideChat(),this.unreadCounter.stop(),this.popup.destroy(),this.deeplinker.stop(),T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this))}},{key:"prepareOptions",value:function(e,t){return Object(w.a)(e,t)}},{key:"ready",value:function(){T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.unreadCounter.stop()}},{key:"handleUnreadCounterUpdate",value:function(e){this.emit("unreadCounterChange",e)}},{key:"handleDocumentClick",value:function(e){var t=e.target;this.inFullscreen||!t||this.refs.widget.contains(t)||this.refs.popup.contains(t)||this.hideChat()}},{key:"handleHeaderClick",value:function(e){e.stopPropagation()}},{key:"handleCloseClick",value:function(){this.isChatLoadFailed&&(this.isChatLoadFailed=!1,this.isChatCreated=!1,this.hideError(),this.messengerIframe.reset()),this.hideChat()}},{key:"stopButton",value:function(){var e=this.refs.button;e.removeAttribute("href"),e.removeAttribute("target")}},{key:"handleButtonClick",value:function(){var e=this.generateClickId();Object(a.b)("widget-clicked",{chatVisible:this.isChatVisible,clickId:e}),this.stopButton(),this.isChatVisible?this.hideChat():this.openChat(this.getOpenChatParams(),e)}},{key:"showChat",value:function(e){var t=this.generateClickId();Object(a.b)("api-show-chat",{chatVisible:this.isChatVisible,clickId:t}),this.openChat(this.getOpenChatParams(e),t)}},{key:"openChat",value:function(e,t){if(!this.tryOpenNative(e,t))return this.isBlockedIframe?this.openNewTab({clickId:t}):void this.openPopup(e,t)}},{key:"isExternal",value:function(){return"external"===this.options.config.name}},{key:"cancelFullscreen",value:function(){this.options.fullscreen&&(this.inFullscreen=!1,this.refs.widget.removeMode({fullscreen:!0}),this.popup.cancelFullscreen(),this.isExternal()&&this.refs.header.removeMode({hidden:!0}),T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"cancelFullscreen",this).call(this))}},{key:"setFullscreen",value:function(){this.options.fullscreen&&(this.inFullscreen=!0,this.refs.widget.setMode({fullscreen:!0}),this.popup.setFullscreen(),this.isExternal()&&this.refs.header.setMode({hidden:!0}),T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setFullscreen",this).call(this))}},{key:"handleDeeplink",value:function(e){this.showChat({deeplink:e})}},{key:"handleErrorMessage",value:function(e){if(e&&"NEED_COOKIE"===e.code&&navigator.cookieEnabled)return this.isBlockedIframe=!0,this.openNewTab({clickId:e.clickId}),void this.hideChat(!0);T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleErrorMessage",this).call(this,e)}}]),t}();Object(o.a)([l.c],S.prototype,"hideChat",null),Object(o.a)([l.c],S.prototype,"openNewTab",null),Object(o.a)([l.c],S.prototype,"destroy",null),Object(o.a)([i.bind],S.prototype,"handleUnreadCounterUpdate",null),Object(o.a)([i.bind],S.prototype,"handleDocumentClick",null),Object(o.a)([i.bind],S.prototype,"handleHeaderClick",null),Object(o.a)([i.bind],S.prototype,"handleCloseClick",null),Object(o.a)([i.bind],S.prototype,"handleButtonClick",null),Object(o.a)([l.c],S.prototype,"showChat",null),Object(o.a)([i.bind],S.prototype,"openChat",null),Object(o.a)([i.bind],S.prototype,"isExternal",null),Object(o.a)([i.bind],S.prototype,"handleDeeplink",null),Object(o.a)([i.bind],S.prototype,"handleErrorMessage",null)},function(e,t,n){"use strict";function o(){return Math.random().toString(36).substring(7)}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return u});var o=n(0),i=n(1),r=n(3),a=n(2),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var c=10;function l(e,t){var n=Object(r.a)("popup"),o=e.attachTo,i=void 0===o?"":o,a=e.size;return'\n        <div\n            data-ref="popup"\n            data-attach-to="'+i+'"\n            class="'+n({position:e.position,desktop:!e.isMobile,theme:e.theme,mobile:e.isMobile})+'"\n        >\n            <div\n                class="'+n("content-wrapper")+'"\n                data-ref="popup-content-wrapper"\n                style="'+(a?"width: "+a.width+" !important; height: "+a.height+" !important":"")+'"\n            >\n                '+t+"\n            </div>\n        </div>\n    "}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t}return s(e,[{key:"bindEvents",value:function(){window.addEventListener("resize",this.handleUpdatePosition),window.addEventListener("scroll",this.handleUpdatePosition),window.addEventListener("orientationchange",this.handleUpdatePosition)}},{key:"unbindEvents",value:function(){window.removeEventListener("resize",this.handleUpdatePosition),window.removeEventListener("scroll",this.handleUpdatePosition),window.removeEventListener("orientationchange",this.handleUpdatePosition)}},{key:"handleUpdatePosition",value:function(){this.setPosition(function(e,t){var n=t.left,o=t.right,i=t.top,r=t.bottom,a=n,s=r,l=e.offsetWidth,u=e.offsetHeight,d=function(){var e=window.innerWidth,t=window.innerHeight;return{left:0+c,top:0+c,right:0+e-c,bottom:0+t-c}}(),h={left:d.left+(d.right-d.left)/2,top:d.top+(d.bottom-d.top)/2};n+l>d.right&&(a=o>h.left?Math.max(o-l,c):Math.min(n,d.right-l));r+u>d.bottom&&i>h.top&&(s=i-u);return{left:Math.floor(a),top:Math.floor(s)}}(this.params.popupElem.getNode(),this.params.targetNode.getBoundingClientRect()))}},{key:"setPosition",value:function(e){var t=this.params.popupElem.getNode().style.cssText;this.params.popupElem.setAttribute("style",t+" left: "+e.left+"px !important; top: "+e.top+"px !important;")}},{key:"setFullscreen",value:function(){this.params.size&&this.params.contentWrapperElem.unsetSize(),this.params.popupElem.setMode({fullscreen:!0}),"target"===this.params.position&&(this.setPosition({left:0,top:0}),this.unbindEvents())}},{key:"cancelFullscreen",value:function(){this.params.size&&this.params.contentWrapperElem.setSize(this.params.size),this.params.popupElem.removeMode({fullscreen:!0}),"target"===this.params.position&&(this.handleUpdatePosition(),this.bindEvents())}},{key:"show",value:function(){this.params.popupElem.setMode({visible:!0}),"target"===this.params.position&&(this.handleUpdatePosition(),this.bindEvents())}},{key:"hide",value:function(){this.params.popupElem.removeMode({visible:!0}),"target"===this.params.position&&this.unbindEvents()}},{key:"destroy",value:function(){this.unbindEvents(),delete this.params}}]),e}();Object(o.a)([i.bind],u.prototype,"handleUpdatePosition",null),Object(o.a)([a.c],u.prototype,"setPosition",null),Object(o.a)([a.c],u.prototype,"setFullscreen",null),Object(o.a)([a.c],u.prototype,"cancelFullscreen",null),Object(o.a)([a.c],u.prototype,"show",null),Object(o.a)([a.c],u.prototype,"hide",null),Object(o.a)([a.c],u.prototype,"destroy",null)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),i=n(1),r=n(4),a=n(26),s=n(3),c=n(2),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var u=["auth","setThemeVariables","iframe-open"],d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t,this.delayedMessages=[],this.isReady=!1,this.isTransportReady=!1,this.iframeOpenData=Object.assign({},this.params.iframeOpenData)}return l(e,[{key:"create",value:function(){this.reset();var e=this.params.authToken;e&&this.delayedMessages.push({type:"auth",payload:{token:e}}),this.iframe=document.createElement("iframe"),this.iframe.setAttribute("scrolling","no"),this.iframe.src=this.url,this.iframe.className=Object(s.b)("messenger-iframe"),this.iframe.onerror=this.params.onError,this.params.allow&&this.iframe.setAttribute("allow",this.params.allow.join("; ")),this.params.container.append(this.iframe)}},{key:"sendMessage",value:function(e,t,n){if(this.isReady)this.sendMessageToIframe(e,t);else{n&&this.removeDelayedMessages(e);var o=t;"iframe-open"===e&&(t?(o=t,this.iframeOpenData=t):o=this.iframeOpenData),this.delayedMessages.push({type:e,payload:o})}}},{key:"sendMessageToIframe",value:function(e,t){this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.postMessage({namespace:"messenger",type:e,payload:Object.assign(Object.assign({},t),{parentUrl:window.location.href})},this.origin)}},{key:"sendDelayedMessages",value:function(){var e=this;this.delayedMessages.forEach(function(t){e.sendMessage(t.type,t.payload)}),this.delayedMessages=[]}},{key:"removeDelayedMessages",value:function(e){this.delayedMessages=this.delayedMessages.filter(function(t){return t.type!==e})}},{key:"setVisible",value:function(){this.iframe&&this.iframe.classList.add(Object(s.b)("messenger-iframe",{visible:!0}))}},{key:"setReady",value:function(){this.isReady=!0,this.sendDelayedMessages(),this.setVisible()}},{key:"setTransportReady",value:function(){var e=this;this.isTransportReady=!0,this.delayedMessages=this.delayedMessages.filter(function(t){return-1===u.indexOf(t.type)||(e.sendMessageToIframe(t.type,t.payload),!1)})}},{key:"reset",value:function(){this.isReady=!1,this.isTransportReady=!1,this.delayedMessages=[],Object(r.safeRemoveNode)(this.iframe),delete this.iframe}},{key:"destroy",value:function(){this.reset(),delete this.params}},{key:"blur",value:function(){this.iframe&&(this.iframe.blur(),window.focus())}},{key:"url",get:function(){return this.cachedUrl?this.cachedUrl:this.cachedUrl=this.params.url()}},{key:"origin",get:function(){if(this.cachedOrigin)return this.cachedOrigin;var e=this.url.split("/").slice(0,3).join("/");return e&&0===e.indexOf("http")||(e=Object(r.getOrigin)()),this.cachedOrigin=e}}]),e}(),h=d;Object(o.a)([c.c],d.prototype,"create",null),Object(o.a)([c.c],d.prototype,"sendMessage",null),Object(o.a)([c.c],d.prototype,"sendMessageToIframe",null),Object(o.a)([c.c],d.prototype,"sendDelayedMessages",null),Object(o.a)([c.c],d.prototype,"removeDelayedMessages",null),Object(o.a)([c.c],d.prototype,"setVisible",null),Object(o.a)([c.c],d.prototype,"setReady",null),Object(o.a)([c.c],d.prototype,"setTransportReady",null),Object(o.a)([c.c],d.prototype,"reset",null),Object(o.a)([c.c],d.prototype,"destroy",null),Object(o.a)([c.c],d.prototype,"blur",null);var p=n(6),f=n(18),y=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var v=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.isChatVisible=!1,o.errorTimers={},o.isChatLoadFailed=!1,o.isChatCreated=!1,o.defaultFlags={newHeader:1,embed_button:1},o.wasReady=!1,o.ERROR_TIMEOUT=3e4,o.buckets=new a.RequestsBucket,o.defaultFlags=Object.assign(Object.assign({},o.defaultFlags),null==e?void 0:e.defaultFlags),Object(c.a)(function(){o.messageHandler.register("ready",o.handleReadyMessage).register("unload",o.handleUnmount).register("error",o.handleErrorMessage).register("fullscreenOn",o.handleFullscreenOn).register("fullscreenOff",o.handleFullscreenOff).register("transportReady",o.handleTransportReady).register("request",o.handleRequest).register("chatHistoryLoaded",o.handleChatLoaded).register("chatListLoaded",o.handleChatListLoaded).register("chatLoadError",o.handleChatLoadError).register("sendMessageOk",o.handleSendMessageOk).register("sendImageOk",o.handleSendMessageOk).register("sendMessageError",o.handleSendMessageError).register("sendImageError",o.handleSendMessageError),window.addEventListener("message",o.handleMessage),window.addEventListener("visibilitychange",o.handleVisibility),o.addListener("error",o.logError)}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f["a"]),b(t,[{key:"initMessengerIframe",value:function(){var e=this;this.messengerIframe=new h({container:this.refs.mount,allow:this.options.iframeAllow,iframeOpenData:{guid:this.options.guid,chatId:this.options.chatId,inviteHash:this.options.inviteHash},authToken:this.options.authToken,onError:this.handleIframeError,url:function(){return e.getIframeUrl()}})}},{key:"iframeOpen",value:function(e,t){var n=this;this.messengerIframe.sendMessage("iframe-open",Object.assign(Object.assign({},e),{visitId:this.widgetId,clickId:t,eventTimestamp:Date.now()})),this.clearErrorTimeout("chatNotLoaded"),this.clearErrorTimeout("chatListNotLoaded");var o=void 0;e.guid||e.chatId||e.inviteHash?o="chatNotLoaded":e.chatList&&(o="chatListNotLoaded"),!this.wasReady&&o&&this.setErrorTimeout(o,function(){n.emit("error",{error:new Error(o+": timeout"),code:o,additional:{guid:null==e?void 0:e.guid,chatId:null==e?void 0:e.chatId,inviteHash:null==e?void 0:e.inviteHash},loggable:!0})})}},{key:"destroy",value:function(){window.removeEventListener("message",this.handleMessage),window.removeEventListener("visibilitychange",this.handleVisibility),r.isServiceWorkerSupported&&navigator.serviceWorker.removeEventListener("message",this.handleMessage),this.messengerIframe.destroy(),this.clearAllErrorTimeout(),function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"sendMessage",value:function(e,t,n){this.messengerIframe.sendMessage(e,t,n)}},{key:"sendTextMessage",value:function(e){var t=this;return this.buckets.request(function(n){return t.sendMessage("sendTextMessage",Object.assign(Object.assign({},e),{reqId:n}),!0),n})}},{key:"sendImage",value:function(e){var t=this;return this.buckets.request(function(n){return t.sendMessage("sendImage",Object.assign(Object.assign({},e),{reqId:n}),!0),n})}},{key:"getIframeUrl",value:function(e){var t=this.options,n=Object.assign(Object.assign(Object.assign({lang:t.lang,parentOrigin:Object(r.getOrigin)(),parentUrl:window.location.href,serviceId:t.serviceId,workspaceId:t.workspaceId,unreadCounterChatId:t.unreadCounterChatId,unreadCounterOtherGuid:t.unreadCounterOtherGuid,unreadCounterNsFilter:t.unreadCounterNsFilter,utm_source:"widget",utm_medium:"iframe",widgetId:this.widgetId,expectedUserGuid:t.expectedUserGuid,widgetInitTimestamp:Date.now()},t.iframeUrlParams),e),this.getFlags()),o=Object(r.queryStringify)(Object(r.replaceTld)(t.iframeUrl),n);return t.chatId&&(o+="#/chats/"+encodeURIComponent(t.chatId)),o}},{key:"getFlags",value:function(){var e=this,t=(this.options.iframeUrlParams||{}).flags,n={};(Object.keys(this.defaultFlags).forEach(function(t){n[t]=e.defaultFlags[t]}),this.options.authToken&&(n.waitToken=1),this.options.fullscreen&&(n.fullscreenSupported=1),"string"==typeof t)&&t.split(";").forEach(function(e){var t=e.split("="),o=y(t,2),i=o[0],r=o[1];n[i]=r});return{flags:Object.keys(n).reduce(function(e,t){return void 0!==t&&void 0!==n[t]&&e.push(t+"="+n[t]),e},[]).join(";")}}},{key:"createMessengerIframe",value:function(){this.messengerIframe.create(),this.options.themeVariables&&this.sendThemeVariables(this.options.themeVariables),this.setMessengerIframeLoading()}},{key:"setMessengerIframeLoading",value:function(){this.hideError(),this.setErrorTimeout("iframeNotLoaded",this.showErrorOnTimeout),this.showLoader()}},{key:"handleIframeError",value:function(){this.showErrorOnTimeout()}},{key:"showErrorOnTimeout",value:function(){this.emit("error",{error:new Error("Ready timeout"),code:"TIMEOUT",loggable:!0}),this.messengerIframe.reset(),this.hideLoader(),this.showError(),this.isChatLoadFailed=!0}},{key:"handleOnErrorRetryClick",value:function(){this.createMessengerIframe()}},{key:"handleMessage",value:function(e){var t=e.data;if(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}if((!t.widgetId||t.widgetId===this.widgetId)&&t&&t.type&&"messenger"===t.namespace){if("ready"===t.type){if(this.isChatCreated)return;this.isChatCreated=!0,this.messengerIframe.setReady()}this.messageHandler.handle(t.type,t.payload)}}}},{key:"handleTransportReady",value:function(){this.messengerIframe.setTransportReady()}},{key:"handleRequest",value:function(e){var t=this,n=e.method,o=e.requestId;this.emit("request:"+n,{respond:function(e){t.sendMessage("requestResponse",{requestId:o,data:e},!1)},error:function(e){t.sendMessage("requestResponse",{requestId:o,error:e},!1)},unsupported:function(){t.sendMessage("requestResponse",{requestId:o,error:"not_supported"},!1)}})}},{key:"ready",value:function(){this.wasReady?this.emit("reload"):this.emit("ready"),this.hideLoader(),this.hideError(),this.hideClose(),this.isChatLoadFailed=!1,this.isChatCreated=!0,this.wasReady=!0}},{key:"handleReadyMessage",value:function(){this.ready()}},{key:"handleUnmount",value:function(){this.setMessengerIframeLoading(),this.isChatCreated=!1}},{key:"handleFullscreenOn",value:function(){this.setFullscreen()}},{key:"handleFullscreenOff",value:function(){this.cancelFullscreen()}},{key:"handleErrorMessage",value:function(e){this.emit("error",e),e&&"NEED_COOKIE"===e.code&&(this.hideLoader(),this.hideError(),this.messengerIframe.setVisible())}},{key:"handleSendMessageOk",value:function(e){this.buckets.result(e.reqId,void 0,"ok")}},{key:"handleSendMessageError",value:function(e){this.buckets.result(e.reqId,e.error)}},{key:"showLoader",value:function(){this.refs.loader.setMode({visible:!0})}},{key:"hideLoader",value:function(){this.refs.loader.removeMode({visible:!0})}},{key:"hideClose",value:function(){this.refs.close&&this.refs.close.removeMode({visible:!0})}},{key:"showError",value:function(){this.clearAllErrorTimeout(),this.refs.error.setMode({visible:!0})}},{key:"hideError",value:function(){this.clearErrorTimeout("iframeNotLoaded"),this.refs.error.removeMode({visible:!0})}},{key:"setErrorTimeout",value:function(e,t){this.errorTimers[e]&&this.clearErrorTimeout(e),this.errorTimers[e]=window.setTimeout(t,this.ERROR_TIMEOUT)}},{key:"clearErrorTimeout",value:function(e){this.errorTimers[e]&&(window.clearTimeout(this.errorTimers[e]),this.errorTimers[e]=void 0)}},{key:"clearAllErrorTimeout",value:function(){var e=this;Object.keys(this.errorTimers).forEach(function(t){return e.clearErrorTimeout(t)})}},{key:"cancelFullscreen",value:function(){document.body.style.overflowX=this.bodyOverflowX||"",document.body.style.overflowY=this.bodyOverflowY||""}},{key:"setFullscreen",value:function(){this.bodyOverflowX=document.body.style.overflowX,this.bodyOverflowY=document.body.style.overflowY,document.body.style.overflowX="hidden",document.body.style.overflowY="hidden"}},{key:"handleVisibility",value:function(){"visible"!==document.visibilityState&&this.messengerIframe&&this.messengerIframe.blur()}},{key:"setVisibility",value:function(e){this.sendMessage("setVisibility",{visible:e},!0)}},{key:"handleChatLoaded",value:function(){this.clearErrorTimeout("chatNotLoaded"),this.emit("chatHistoryLoaded")}},{key:"handleChatLoadError",value:function(e){var t=e.error,n=e.additional;this.clearErrorTimeout("chatNotLoaded");var o=new Error(t.message);this.emit("error",{error:o,code:"chatNotLoaded",additional:Object.assign({source:"iframe",sourceMethod:"handleChatLoadError",code:"chatNotLoaded",stack:t.stack},n),loggable:!0})}},{key:"handleChatListLoaded",value:function(){this.clearErrorTimeout("chatListNotLoaded")}},{key:"logError",value:function(e){var t=e.loggable,n=e.error,o=e.additional;t&&Object(p.logError)(n,{additional:o})}}]),t}();Object(o.a)([c.c],v.prototype,"initMessengerIframe",null),Object(o.a)([i.bind],v.prototype,"handleIframeError",null),Object(o.a)([i.bind],v.prototype,"showErrorOnTimeout",null),Object(o.a)([i.bind],v.prototype,"handleOnErrorRetryClick",null),Object(o.a)([i.bind],v.prototype,"handleMessage",null),Object(o.a)([i.bind],v.prototype,"handleTransportReady",null),Object(o.a)([i.bind],v.prototype,"handleRequest",null),Object(o.a)([i.bind],v.prototype,"handleReadyMessage",null),Object(o.a)([i.bind],v.prototype,"handleUnmount",null),Object(o.a)([i.bind],v.prototype,"handleFullscreenOn",null),Object(o.a)([i.bind],v.prototype,"handleFullscreenOff",null),Object(o.a)([i.bind],v.prototype,"handleErrorMessage",null),Object(o.a)([i.bind],v.prototype,"handleSendMessageOk",null),Object(o.a)([i.bind],v.prototype,"handleSendMessageError",null),Object(o.a)([i.bind],v.prototype,"clearAllErrorTimeout",null),Object(o.a)([i.bind],v.prototype,"handleVisibility",null),Object(o.a)([i.bind],v.prototype,"handleChatLoaded",null),Object(o.a)([i.bind],v.prototype,"handleChatLoadError",null),Object(o.a)([i.bind],v.prototype,"handleChatListLoaded",null),Object(o.a)([i.bind],v.prototype,"logError",null)},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getSettings=t.updateSettings=void 0;var i={clck:"https://yandex.ru/clck/click",project:"unknown",additional:{},level:"error"};t.updateSettings=function(e){i=o(o({},i),e)},t.getSettings=function(){return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGES_NAMESPACE=t.HEALTH_NAMESPACE=t.HEALTH_SERVICE_ID=t.LOCAL_STORAGE_KEY_NAME=t.MAX_UNREAD_TIMEOUT=t.MIN_UNREAD_TIMEOUT=t.MAX_UNREAD_TTL=t.MIN_UNREAD_TTL=void 0,t.MIN_UNREAD_TTL=10,t.MAX_UNREAD_TTL=300,t.MIN_UNREAD_TIMEOUT=1e3*t.MIN_UNREAD_TTL,t.MAX_UNREAD_TIMEOUT=1e3*t.MAX_UNREAD_TTL,t.LOCAL_STORAGE_KEY_NAME="yachat-unread",t.HEALTH_SERVICE_ID=19,t.HEALTH_NAMESPACE=5,t.MESSAGES_NAMESPACE="messenger-unread-counter"},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(4),i=n(3),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var a=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.selector=n,this.listeners=o,o&&Object.keys(o).forEach(function(e){t.addEventListener(e,o[e])})}return r(e,[{key:"contains",value:function(e){return this.node.contains(e)}},{key:"append",value:function(e){this.node.appendChild(e)}},{key:"text",value:function(e){this.node.innerText=e}},{key:"setMode",value:function(e){this.node.classList.add(Object(i.b)(this.selector,e))}},{key:"setSize",value:function(e){var t=e.height,n=e.width;this.node.style.setProperty("height",t,"important"),this.node.style.setProperty("width",n,"important")}},{key:"unsetSize",value:function(){this.node.style.height="",this.node.style.width=""}},{key:"removeMode",value:function(e){this.node.classList.remove(Object(i.b)(this.selector,e))}},{key:"setAttribute",value:function(e,t){this.node.setAttribute(e,t)}},{key:"removeAttribute",value:function(e){this.node.removeAttribute(e)}},{key:"getNode",value:function(){return this.node}},{key:"remove",value:function(){var e=this;Object.keys(this.listeners).forEach(function(t){e.node.removeEventListener(t,e.listeners[t])}),Object(o.safeRemoveNode)(this.node),this.listeners=void 0,this.node=void 0}}]),e}(),s=/^data-/,c=/-(.)/g;var l=n(8),u=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var h=function(){function e(t){var n=this,o=t.template,i=t.styles,r=t.mountNode,l=t.listeners,d=t.nonce,h=t.themeVariables;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refs={},this.template=o,this.styles=i,this.nonce=d;var p=document.createDocumentFragment();if(this.styles){var f=this.styleNode=document.createElement("style");this.nonce&&f.setAttribute("nonce",this.nonce),f.appendChild(document.createTextNode(this.styles)),p.appendChild(f)}var y=document.createElement("div");y.innerHTML=this.template;var b=y.firstElementChild;if(!b)throw new Error("Bad template");p.appendChild(document.createComment("noindex")),p.appendChild(b),p.appendChild(document.createComment("/noindex")),r.appendChild(p),[b].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array.prototype.slice.call(b.querySelectorAll("[data-ref]")))).forEach(function(e){var t=function(e){if(e.dataset)return e.dataset;for(var t=e.attributes,n={},o=0;o<t.length;o++){var i=t[o];i&&i.name.match(s)&&(n[i.name.slice(5).replace(c,function(e,t){return t.toUpperCase()})]=i.value)}return n}(e),o=t.ref,i=t.attachTo;if(!o)throw new Error("Attribute data-ref should be non empty string");if(n.refs[o])throw new Error("Ref "+o+" aready defined");"body"===i&&document.body.appendChild(e);var r=o.split(":"),d=u(r,2),h=d[0],p=d[1];n.refs[h]=new a(e,p||h,l[o])}),this.setThemeVariables(h)}return d(e,[{key:"destroy",value:function(){var e=this;Object.keys(this.refs).forEach(function(t){e.refs[t].remove()}),this.refs=void 0,this.styleNode&&Object(o.safeRemoveNode)(this.styleNode)}},{key:"setThemeVariables",value:function(e){e&&this.refs.widget&&Object(l.a)(this.refs.widget.getNode(),e)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),i=n(1),r=n(6),a=n(27),s=n(2),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.commands={}}return c(e,[{key:"register",value:function(e,t){return this.commands[e]=t,this}},{key:"default",value:function(e){return this.defaultHandler=e,this}},{key:"handle",value:function(e,t){var n=this.commands[e];n?n(t):this.defaultHandler&&this.defaultHandler(e,t)}}]),e}(),u=n(5),d=n(12),h=n(8),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var f={chatChange:"chatEnter",chatLeave:"chatLeave",chatHistoryLoaded:"chatHistoryLoaded",channelSubscribed:"channelSubscribed",channelUnsubscribed:"channelUnsubscribed",members:"membersChange",auth:"authChange","send-message":"messageSent",authRequest:"authRequest",error:"error",counter:"unreadCounterChange",catchUrlClick:"catchUrlClick",userNeedReAssign:"userNeedReAssign",userLoaded:"userLoaded",unreadCountersByChats:"unreadCountersByChats"},y=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o._widgetId="msngr_widget_"+Object(d.a)(),o.defaultFlags={},Object(s.a)(function(){o.options=o.prepareOptions(Object.assign(Object.assign({},n),o.constructor.overrideOptions),e),Object(r.updateSettings)({service:""+o.options.serviceId,additional:Object.assign(Object.assign({},Object(r.getSettings)().additional),{workspaceId:""+o.options.workspaceId})}),o.template=o.createTemplate(),o.messageHandler=(new l).default(o.defaultMessageHandler)}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["EventEmitter"]),p(t,[{key:"sendServiceMeta",value:function(e){this.sendMessage("serviceMeta",e,!0)}},{key:"sendThemeVariables",value:function(e){this.sendMessage("setThemeVariables",{themeVariables:{value:e}},!0)}},{key:"setThemeVariables",value:function(e){var t=Object(h.b)(e),n=t.widgetThemeVariables,o=t.themeVariables;this.template.setThemeVariables(n),o&&this.sendThemeVariables(o)}},{key:"sendChatMetadata",value:function(e){this.sendMessage("chatMetadata",e,!0)}},{key:"destroy",value:function(){this.destroyed||(this.template.destroy(),this.destroyed=!0)}},{key:"defaultMessageHandler",value:function(e,t){var n=f[e];n&&this.emit(n,t)}},{key:"onShowEntryPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.b)("entry-point-shown",{stat:e})}},{key:"getOpenChatParams",value:function(e){return e||{guid:this.options.guid,chatId:this.options.chatId,inviteHash:this.options.inviteHash,helloMessage:this.options.helloMessage}}},{key:"generateClickId",value:function(){return Object(d.a)()}},{key:"widgetId",get:function(){return this._widgetId}},{key:"refs",get:function(){return this.template.refs}}]),t}();y.version="1.42.0",y.overrideOptions={},Object(o.a)([s.c],y.prototype,"sendServiceMeta",null),Object(o.a)([s.c],y.prototype,"setThemeVariables",null),Object(o.a)([s.c],y.prototype,"sendChatMetadata",null),Object(o.a)([s.c],y.prototype,"destroy",null),Object(o.a)([i.bind],y.prototype,"defaultMessageHandler",null),Object(o.a)([s.c],y.prototype,"onShowEntryPoint",null)},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,i++)o[i]=r[a];return o};Object.defineProperty(t,"__esModule",{value:!0}),t.handleError=t.sendError=t.baseNormalizeError=void 0;var r=n(47),a=n(15);t.baseNormalizeError=function(e){void 0===e&&(e={});var t=e.filename||e.fileName||"",n=e.error&&e.error.stack||e.stack||"",o=e.message||"";return{file:t,line:e.lineno||e.lineNumber,col:e.colno||e.colNumber,stack:n,message:o,additional:e.additional,referrer:"undefined"!=typeof location&&location.href}};function s(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];"undefined"!=typeof console&&(t=console.error).call.apply(t,i([console,e],n))}t.sendError=function(e,t){void 0===t&&(t={});var n=a.getSettings(),o={"-url":e.file,"-line":e.line,"-col":e.col,"-stack":e.stack,"-env":n.env,"-msg":e.message,"-project":n.project,"-page":e.page||n.page,"-level":e.level,"-version":n.version,"-referrer":e.referrer,"-additional":t.additional,"-ua":"undefined"!=typeof navigator&&navigator.userAgent,"-ts":+new Date};n.debug&&s("[error-counter]",o),r.send(e.path,function(e){var t=[];return Object.keys(e).map(function(n){if(e.hasOwnProperty(n)&&(e[n]||0===e[n])){var o=encodeURIComponent(e[n]).replace(/\*/g,"%2A");t.push(n+"="+o)}}),t.join(",")}(o))};t.handleError=function(e){var n=a.getSettings();e.path="690.2354";var i="";try{i=JSON.stringify(o(o({},n.additional),e.additional))}catch(e){s("[error-counter] json.stringify:",e)}t.sendError(e,{additional:i})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=void 0;t.noop=function(){}},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;var i=n(66),r=1e4,a=function(){function e(t){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a=arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onResult=t,this.timeout=new i.Timer(function(){n.result(new a)},o)}return o(e,[{key:"result",value:function(e,t){this.clearTimeout(),e?this.onResult(e):this.onResult(void 0,t)}},{key:"clearTimeout",value:function(){this.timeout&&(this.timeout.cancel(),this.timeout=void 0)}}]),e}();t.Request=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestTimeoutError=void 0;var o=n(23),i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Request timeout",e));return Object.setPrototypeOf(n,t.prototype),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.TransportError),t}();t.RequestTimeoutError=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransportError=void 0;var o=n(67),i=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"TransportError, "+e,n));return Object.setPrototypeOf(o,t.prototype),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.BaseError),t}();t.TransportError=i},function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BaseError=void 0;var r=n(25),a=function(e){function t(n,o){var i=e.call(this,n)||this;return o&&(i.stack=o),Object.setPrototypeOf(i,t.prototype),i}return i(t,e),t.handle=function(e){return new r.ErrorVisitor(this,e)},t.is=function(e){return e instanceof this},t.prototype.accept=function(e){this instanceof e.error&&e.callback(this)},t}(Error);t.BaseError=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHandler=t.ErrorVisitor=void 0;var o=function(){return function(e,t){this.error=e,this.callback=t}}();t.ErrorVisitor=o,t.createHandler=function(e,t){return Object.keys(e).reduce(function(e,n){return e[n]=function(e){return t(e,n)},e},{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransportError=t.RequestTimeoutError=t.Request=t.RequestsBucket=void 0;var o=n(65);Object.defineProperty(t,"RequestsBucket",{enumerable:!0,get:function(){return o.RequestsBucket}});var i=n(21);Object.defineProperty(t,"Request",{enumerable:!0,get:function(){return i.Request}});var r=n(22);Object.defineProperty(t,"RequestTimeoutError",{enumerable:!0,get:function(){return r.RequestTimeoutError}});var a=n(23);Object.defineProperty(t,"TransportError",{enumerable:!0,get:function(){return a.TransportError}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var o=function(){function e(){this.listeners={}}return e.prototype.addListener=function(e,t){this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)},e.prototype.removeListener=function(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(function(e){return e!==t}),this.listeners[e].length||this.removeAllListeners(e))},e.prototype.removeAllListeners=function(e){var t=this;e?this.listeners[e]&&delete this.listeners[e]:Object.keys(this.listeners).forEach(function(e){return delete t.listeners[e]})},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(this.listeners[e]||[]).forEach(function(e){return e.apply(void 0,t)})},e}();t.EventEmitter=o},function(e){e.exports=JSON.parse('{"close":"","error-title":"   ","error-try-again":"  ","widget_promo_0":"     ","widget_promo_1":"   ,   ","widget_promo_2":"        "}')},function(e){e.exports=JSON.parse('{"close":"Close","error-title":"Failed to load chat","error-try-again":"Try again","widget_promo_0":"Follow channels and share with friends","widget_promo_1":"Chat with family and friends wherever Yandex is","widget_promo_2":"Send voice messages that automatically get converted to text"}')},function(e){e.exports=JSON.parse('{"close":"Fermer","error-title":"Impossible de charger le chat","error-try-again":"Ressayer","widget_promo_0":"Suivre les canaux et partager avec des amis","widget_promo_1":"Discutez avec votre famille et vos amis avec Yandex, o que vous soyez","widget_promo_2":"Envoyez des messages vocaux automatiquement convertis en texte"}')},function(e){e.exports=JSON.parse('{"close":"","error-title":"  ","error-try-again":" ","widget_promo_0":"     ","widget_promo_1":"   ,    Yandex","widget_promo_2":"      "}')},function(e){e.exports=JSON.parse('{"close":"","error-title":"   ","error-try-again":"   ","widget_promo_0":"    ","widget_promo_1":"     ","widget_promo_2":"      "}')},function(e){e.exports=JSON.parse('{"close":"Zatvori","error-title":"Uitavanje askanja nije uspelo","error-try-again":"Pokuajte jo jednom","widget_promo_0":"itajte kanale i delite se sa blinjima","widget_promo_1":"Razgovarajte sa blinjima, gde god se nalazi Yandex","widget_promo_2":"Poaljite glasovne poruke i one ce se pretvoriti u tekst"}')},function(e){e.exports=JSON.parse('{"close":"Kapat","error-title":"Sohbet yklenemedi","error-try-again":"Tekrar dene","widget_promo_0":"Kanallar takip edin ve arkadalarnzla paylan","widget_promo_1":"Yandex\'in olduu her yerde arkadalarnzla yazn","widget_promo_2":"Otomatik olarak metne evrilen sesli mesajlar gnderin"}')},function(e){e.exports=JSON.parse('{"close":"Yopish","error-title":"Chatni yuklash imkoni bolmadi","error-try-again":"Qayta urinish","widget_promo_0":"Kanallarni kuzating va yaqinlaringizga ulashing","widget_promo_1":"Yandex bor istalgan joyda yaqinlaringiz bilan muloqot qiling","widget_promo_2":"Ovozli xabarlar yuboring  ular matnga aylanadi"}')},function(e,t,n){"use strict";var o=n(3);t.a=function(e){var t=Object(o.a)("loader");return'\n        <div data-ref="loader" class="'+t({theme:e})+'">\n            <div class="'+t("spinner")+'"></div>\n        </div>\n    '}},function(e,t,n){"use strict";var o=n(3),i=n(10);t.a=function(e){var t=Object(o.a)("error");return'\n        <div data-ref="error" class="'+t({mobile:e.isMobile,theme:e.theme})+'">\n            <div class="'+t("title")+'">'+Object(i.a)("error-title",e.lang)+'</div>\n            <div class="'+t("button")+'">'+Object(i.a)("error-try-again",e.lang)+"</div>\n        </div>\n    "}},function(e,t,n){"use strict";function o(e,t){var n=window.Ya;void 0!==n&&void 0!==n.Rum&&"function"==typeof n.Rum.sendResTiming&&(n.Rum.sendResTiming("messenger_"+e+"_yastatic","https://yastatic.net/s3/chat/"+e+".js"),n.Rum.sendResTiming("messenger_"+e+"_yastatic","https://yastatic.net/s3/chat/"+t+"/"+e+".js"),n.Rum.sendResTiming("messenger_"+e+"_s3","https://chat.s3.yandex.net/"+e+".js"),n.Rum.sendResTiming("messenger_"+e+"_s3","https://chat.s3.yandex.net/"+t+"/"+e+".js"))}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),i=n(1),r=n(9),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var s=/^https?:\/\/yandex\.[^/]+\/chat/;var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callback=t}return a(e,[{key:"start",value:function(){Object(r.b)()||window.addEventListener("click",this.handleLink,!0)}},{key:"stop",value:function(){Object(r.b)()||window.removeEventListener("click",this.handleLink,!0)}},{key:"handleLink",value:function(e){for(var t=e.target;t;){if("A"===t.tagName&&s.test(t.href))return this.callback(t.href),void e.preventDefault();t=t.parentElement}}}]),e}();Object(o.a)([i.bind],c.prototype,"handleLink",null)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),i=n(1),r=n(4),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var s=function(){function e(t,n,o,i,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.badge=t,this.badgeCount=n,this.options=o,this.onUpdated=i,this.updateBadgeHook=a,s&&(this.unreadCounter=s({callback:this.handleUnreadCounter,serviceId:this.options.serviceId,workspaceId:this.options.workspaceId,chatId:this.options.unreadCounterChatId,guid:this.options.unreadCounterOtherGuid,url:Object(r.replaceTld)(this.options.unreadUrl),ns:this.options.unreadCounterNsFilter}))}return a(e,[{key:"start",value:function(){var e;this.options.unreadDisabled||null===(e=this.unreadCounter)||void 0===e||e.start()}},{key:"stop",value:function(){var e;this.options.unreadDisabled||null===(e=this.unreadCounter)||void 0===e||e.stop()}},{key:"set",value:function(e){var t;this.update(e)&&(null===(t=this.unreadCounter)||void 0===t||t.removeData())}},{key:"handleUnreadCounter",value:function(e){this.update(e)}},{key:"update",value:function(e){var t=this.lastValue,n=e.valueForChat,o=void 0===n?0:n,i=e.value,r=void 0===i?0:i,a=e.lastTimestamp,s=void 0===a?0:a,c=e.seqnoForChat,l=void 0===c?0:c;return(!t||r!==t.value||o!==t.valueForChat||s!==t.lastTimestamp||l!==t.seqnoForChat)&&(this.lastValue={value:r,lastTimestamp:s,valueForChat:o,seqnoForChat:l},this.updateBadge(r),this.onUpdated(this.lastValue),!0)}},{key:"updateBadge",value:function(e){var t=e>0,n=this.badge,o=this.badgeCount,i=this.options.badgeMaxCount;this.updateBadgeHook&&this.updateBadgeHook(n,e)||(t?(n.setMode({"has-count":!0}),o.text(String(i<e?i+"+":e))):(n.removeMode({"has-count":!0}),o.text("")))}},{key:"value",get:function(){return this.lastValue}}]),e}();Object(o.a)([i.bind],s.prototype,"set",null),Object(o.a)([i.bind],s.prototype,"handleUnreadCounter",null)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(4),i=n(7),r=n(8),a={height:"520px",width:"360px"},s={legacy:{width:"420px",height:"600px"},hidden:{width:"420px",height:"600px"}};function c(e,t,n,o){return e&&!o?e:t?"fixed":o?"target":n===document.body?"static":"target"}function l(e,t){var n=e.collapsedDesktop||t.collapsedDesktop;-1===["always","never","hover"].indexOf(n)&&(n="hover");var l=e.collapsedTouch||t.collapsedTouch;-1===["always","never"].indexOf(l)&&(l="always"),e.buttonText||(n="always",l="always");var u,d,h,p=void 0===e.isMobile?i.b:e.isMobile,f=e.theme||t.theme,y=e.mountNode||document.body,b=e.fullscreen,v=void 0===b?t.fullscreen:b,m=Object(r.b)(e.themeVariables),g=m.widgetThemeVariables,_=m.themeVariables;return Object.assign(Object.assign({},e),{config:t,autocloseable:"autocloseable"in e?e.autocloseable:t.autocloseable,badgeType:e.badgeType||t.badgeType,badgeCount:Number(e.badgeCount||0),badgeMaxCount:Number(e.badgeMaxCount||t.badgeMaxCount),collapsedDesktop:n,collapsedTouch:l,serviceId:void 0===e.serviceId?void 0:Number(e.serviceId),isMobile:p,lang:e.lang||t.lang,mountNode:y,size:p?void 0:Object.assign(Object.assign(Object.assign({},a),s[f]),e.size?(u=e.size,d=u.height,h=u.width,Object.assign(Object.assign({},d?{height:d}:null),h?{width:h}:null)):{}),theme:f,unreadUrl:Object(o.replaceTld)(e.unreadUrl||t.unreadUrl),buttonIcon:e.buttonIcon||t.buttonIconByTheme[f]||t.buttonIcon,buttonCollapsed:p?l:n,chatPosition:c(e.chatPosition,p,y,e.popupTargetNode),iframeUrl:e.iframeUrl||t.iframeUrl,iframeAllow:t.iframeAllow,fullscreen:v,widgetThemeVariables:g,themeVariables:_})}},function(e,t,n){"use strict";function o(){return"function"==typeof window.yandexChatWidgetCallback}function i(){var e;o()&&(null===(e=window.yandexChatWidgetCallback)||void 0===e||e.call(window),delete window.yandexChatWidgetCallback,document.removeEventListener("DOMContentLoaded",i,!1))}function r(e){window.Ya=window.Ya||{},window.Ya.ChatWidget=e,o()&&("interactive"===document.readyState||"complete"===document.readyState?i():document.addEventListener("DOMContentLoaded",i,!1))}n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";n.d(t,"b",function(){return l});var o=n(3),i=function(e){var t=Object(o.a)("button"),n=e.text?'\n        <div class="'+t("text")+'">\n            <div class="'+t("text-container",{"theme-extended":e.themeExtended})+'">'+e.text+"</div>\n        </div>":"";return'\n        <a data-ref="button" class="'+t({theme:e.theme,mobile:e.isMobile,collapsed:e.collapsed,size:e.size,desktop:!e.isMobile})+'">\n            <div class="'+t("container",{size:e.size,"theme-extended":e.themeExtended})+'">\n                '+function(e){var t=Object(o.a)("icon"),n={type:e.type,size:e.size};return"happy_new_year"===e.themeExtended?'<div class="'+t(Object.assign(Object.assign({},n),{"theme-extended":e.themeExtended}))+'"></div>':"legacy"===e.theme?'<svg class="'+t(n)+'" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n            <path d="M22.5036,11.18909,5.971,1.78668a.975.975,0,0,0-1.4527.859V5.17828S10.0119,7.3175,10.459,7.48456a.63387.63387,0,0,1,.4759.748c-.08008.20026-.24958.17829-.73841.05927s-7.6358-1.89789-7.6358-1.89789a.8591.8591,0,0,0-.99176,1.174l1.49475,3.556s9.637.40259,9.98413.423c.34192.02014.545.18481.551.45324-.00605.26825-.20911.433-.551.45307-.34711.02038-9.98413.423-9.98413.423l-1.49475,3.556a.85912.85912,0,0,0,.99176,1.174s7.147-1.779,7.6358-1.89789.65833-.141.73841.05921a.63385.63385,0,0,1-.4759.748c-.44708.16712-5.94067,2.30628-5.94067,2.30628v2.53259a.97492.97492,0,0,0,1.4527.859L22.5036,12.811a.91115.91115,0,0,0,0-1.62188Z"/>\n        </svg>':'<svg class="'+t(n)+'" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <g clip-path="url(#clip-mssngr-widget-icon)">\n        <g filter="url(#filter0-mssngr-widget)">\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M14 0C2.8 0 0 2.8 0 14C0 25.2 2.8 28 14 28C25.2 28 28 25.2 28 14C28 2.8 25.2 0 14 0Z" fill="#00D7D7"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M14 0C2.8 0 0 2.8 0 14C0 25.2 2.8 28 14 28C25.2 28 28 25.2 28 14C28 2.8 25.2 0 14 0Z" fill="url(#paint0_linear-mssngr-widget)"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M14 0C2.8 0 0 2.8 0 14C0 25.2 2.8 28 14 28C25.2 28 28 25.2 28 14C28 2.8 25.2 0 14 0Z" fill="url(#paint1_linear-mssngr-widget)"/>\n        </g>\n            <path d="M25.0249 13.7106C24.9593 13.5028 24.8061 13.3169 24.5983 13.1965L8.49834 4.16217C7.86396 3.81217 7.0874 4.2606 7.0874 4.99342V7.11529V8.38404L25.0249 13.7106Z" fill="#FAFFFE"/>\n            <path d="M7.0874 20.9013V23.0231C7.0874 23.745 7.86396 24.2044 8.49834 23.8544L24.5983 14.831C24.8171 14.7106 24.9593 14.5247 25.0249 14.3169L7.0874 19.6216V20.9013Z" fill="#C8F4F9"/>\n            <path d="M7.08759 8.37787L5.87353 8.01693C5.07509 7.77631 4.38603 8.60756 4.7579 9.35131L5.41415 10.6529L6.87978 13.5732L7.09853 13.9997V8.37787H7.08759Z" fill="#DEF8FB"/>\n            <path d="M7.0874 13.9998H25.0796C25.0796 13.8904 25.0577 13.792 25.0249 13.6936L7.0874 8.37793V13.9998Z" fill="#DEF8FB"/>\n            <path d="M7.09853 14.0005L4.7579 18.6489C4.38603 19.3927 5.07509 20.2239 5.87353 19.9833L7.08759 19.6224V14.0005H7.09853Z" fill="#FAFFFE"/>\n            <path d="M7.0874 19.6219L25.0358 14.3063C25.0686 14.2078 25.0905 14.0984 25.0905 14H7.0874V19.6219Z" fill="#FAFFFE"/>\n        </g>\n        <defs>\n        <filter id="filter0-mssngr-widget" x="-25.7204" y="-14.7308" width="79.4408" height="79.4408" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n            <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>\n            <feOffset dy="10.9896"/>\n            <feGaussianBlur stdDeviation="12.8602"/>\n            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"/>\n            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>\n            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>\n        </filter>\n        <linearGradient id="paint0_linear-mssngr-widget" x1="44.8437" y1="-28.5469" x2="14" y2="16.5156" gradientUnits="userSpaceOnUse">\n            <stop stop-color="white"/>\n            <stop offset="1" stop-color="white" stop-opacity="0"/>\n        </linearGradient>\n        <linearGradient id="paint1_linear-mssngr-widget" x1="14" y1="33.3594" x2="34.3437" y2="-11.4844" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#00BCBC"/>\n            <stop offset="1" stop-color="white" stop-opacity="0"/>\n        </linearGradient>\n        <clipPath id="clip-mssngr-widget-icon">\n            <path d="M0 0H28V28H0V0Z" fill="white"/>\n        </clipPath>\n        </defs>\n    </svg>'}({theme:e.theme,type:e.icon,size:e.size,themeExtended:e.themeExtended})+"\n                "+n+"\n            </div>\n            "+function(e){var t=Object(o.a)("badge"),n=e.maxCount<(e.count||0)?e.maxCount+"+":e.count;return'\n        <div data-ref="badge" class="'+t({theme:e.theme,type:e.type,"has-count":Boolean(e.count),size:e.size})+'">\n            <div data-ref="badgeCount" class="'+t("count")+'">'+(n||"")+"</div>\n        </div>\n    "}({count:e.badgeCount,maxCount:e.badgeMaxCount,theme:e.theme,type:e.badgeType,size:e.size})+"\n        </a>"},r=n(37),a=n(36),s=n(13),c=Object(o.a)("widget");function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Boolean(e.isMobile),o="always"===e.buttonCollapsed?"large":"normal",r=e.additionalContent,a=void 0===r?"":r;return'\n        <div data-ref="widget" class="'+c({desktop:!n,theme:e.theme,mobile:n,size:o,shadow:!t})+'">\n            '+a+"\n            "+i({badgeType:e.badgeType,badgeCount:e.badgeCount,badgeMaxCount:e.badgeMaxCount,collapsed:e.buttonCollapsed,icon:e.buttonIcon,isMobile:n,text:e.buttonText,theme:e.theme,themeExtended:e.themeExtended,size:o})+"\n            "+t+"\n        </div>\n    "}t.a=function(e){var t,n,i,u=Boolean(e.isMobile),d="target"===e.chatPosition?"body":void 0;return l(e,"\n        "+(t={isMobile:u,attachTo:d},n=Object(o.a)("paranja"),'<div data-ref="paranja" data-attach-to="'+(void 0===(i=t.attachTo)?"":i)+'" class="'+n({mobile:t.isMobile})+'"></div>')+"\n        "+Object(s.b)({isMobile:u,position:e.chatPosition,theme:e.theme,attachTo:d,size:e.size},"\n            "+function(e){var t=Object(o.a)("header");return'\n        <div data-ref="header" class="'+t({empty:!e.text,theme:e.theme})+'">\n            <div class="'+t("text")+'">\n                '+(e.text||"")+'\n            </div>\n            <div data-ref="headerClose" class="'+t("close")+'"></div>\n        </div>\n    '}({lang:e.lang,text:e.title,theme:e.theme})+"\n            "+function(e){var t=Object(o.a)("close");return'\n        <div data-ref="close" class="'+t({theme:e})+'">\n            <div data-ref="closeButton" class="'+t("button-box")+'">\n                <div class="'+t("button")+'"></div>\n            </div>\n        </div>\n    '}(e.theme)+'\n            <div data-ref="mount:widget__mount" class="'+c("mount")+'">\n                '+Object(a.a)(e.theme)+"\n            </div>\n            "+Object(r.a)({isMobile:u,lang:e.lang,theme:e.theme})+"\n        ")+"\n    ")}},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),i=n(1),r=n(4),a=n(3),s=n(10),c=n(5),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var u="mssngr_widget_promo_launch_value",d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.textIndex=this.checkPromoSetting("promo-launch"===t.themeExtended),this.lang=t.lang,this.badgeType=t.badgeType}return l(e,[{key:"addPromoRef",value:function(e){this.promo=e}},{key:"handleHidePromo",value:function(e){this.promo&&(Object(c.a)(void 0,{event:"promo_launch_close",index:this.textIndex,reason:e}),this.promo.setMode({hidden:!0}),this.textIndex=-1,Object(r.setLocalStorageJsonItem)(u,{date:Date.now(),value:-1}))}},{key:"updateBadge",value:function(e,t){return this.textIndex>=0&&!t?(e.setMode({"has-count":!0}),e.removeMode({type_num:!0}),e.setMode({type_dot:!0}),!0):("num"===this.badgeType&&(e.removeMode({type_dot:!0}),e.setMode({type_num:!0})),!1)}},{key:"renderPromoContent",value:function(){return this.textIndex>=0?(Object(c.a)(void 0,{event:"promo_launch_open",index:this.textIndex}),e={text:Object(s.a)("widget_promo_"+this.textIndex,this.lang)},'<div id="promo" data-ref="promo" class='+(t=Object(a.a)("promo"))()+'>\n                <a data-ref="closePromoBtn" class='+t("close-btn")+'>\n                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M6.79289 15.7929C6.40237 16.1834 6.40237 16.8166 6.79289 17.2071C7.18342 17.5976 7.81658 17.5976 8.20711 17.2071L12 13.4142L15.7929 17.2071C16.1834 17.5976 16.8166 17.5976 17.2071 17.2071C17.5976 16.8166 17.5976 16.1834 17.2071 15.7929L13.4142 12L17.2071 8.20711C17.5976 7.81658 17.5976 7.18342 17.2071 6.79289C16.8166 6.40237 16.1834 6.40237 15.7929 6.79289L12 10.5858L8.20711 6.79289C7.81658 6.40237 7.18342 6.40237 6.79289 6.79289C6.40237 7.18342 6.40237 7.81658 6.79289 8.20711L10.5858 12L6.79289 15.7929Z" fill="currentColor"/>\n                    </svg>\n                </a>\n                <div class='+t("text")+">"+e.text+"</div>\n            </div>"):"";var e,t}},{key:"checkPromoSetting",value:function(e){var t=Object(r.getLocalStorageJsonItem)(u);if(e&&(!t||t.value>=0&&t.value+1<3)){var n=void 0,o=Date.now();if(t&&t.date+172800>o)return-1;t?t.date+172800<=o&&(n=t.value+1):n=0;var i={date:o,value:n};return Object(r.setLocalStorageJsonItem)(u,i),n}return-1}}]),e}();Object(o.a)([i.bind],d.prototype,"addPromoRef",null),Object(o.a)([i.bind],d.prototype,"handleHidePromo",null)},function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(73),t),i(n(74),t),i(n(75),t),i(n(76),t),i(n(77),t),i(n(78),t),i(n(80),t),i(n(81),t),i(n(82),t),i(n(83),t),i(n(70),t),i(n(84),t),i(n(85),t),i(n(86),t)},function(e,t){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i=Object.keys(Object(o)),r=0,a=i.length;r<a;r++){var s=i[r],c=Object.getOwnPropertyDescriptor(o,s);void 0!==c&&c.enumerable&&(t[s]=o[s])}}return t}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.send=void 0;var o=n(15);t.send=function(e,t){var n=function(e,t){return["/path="+e,t?"/vars="+t:"","/cts="+(new Date).getTime(),"/*"]}(e,t).join(""),i=o.getSettings().clck;if(i&&!(navigator&&navigator.sendBeacon&&navigator.sendBeacon(i,n)))if("undefined"!=typeof window&&window.fetch)fetch(i,{method:"POST",body:n});else{var r=new XMLHttpRequest;r.open("POST",i),r.send(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logError=void 0;var o=n(19),i=["type","additional","level","referrer"];t.logError=function(e,t){void 0===t&&(t={});var n=o.baseNormalizeError(e);n.message=[t.message,n.message].filter(Boolean).join("; ")||"Empty error";for(var r=0;r<i.length;r++){var a=i[r];t[a]?n[a]=t[a]:e&&e[a]&&(n[a]=e[a])}o.handleError(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasAuth=void 0,t.hasAuth=function(){return-1!==document.cookie.search(/(^|; )yandex_login=[^;]+/)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=void 0,i=void 0,r=void 0;function a(){var t=i,n=r;i=void 0,r=void 0,t&&e.call.apply(e,[n].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)))}var s=function(){for(var e=arguments.length,s=Array(e),c=0;c<e;c++)s[c]=arguments[c];i=s,r=this,o?clearTimeout(o):n&&a(),o=setTimeout(function(){o=void 0,n||a()},t)};return s.cancel=function(){i=void 0,r=void 0,o&&(clearTimeout(o),o=void 0)},s.flush=function(){o&&(clearTimeout(o),o=void 0),a()},s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeRemoveNode=void 0,t.safeRemoveNode=function(e){try{e&&e.parentNode&&e.parentNode.removeChild(e)}catch(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isServiceWorkerSupported=void 0,t.isServiceWorkerSupported=Boolean("undefined"!=typeof navigator&&"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener&&navigator.serviceWorker.removeEventListener)},function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.removeLocalStorageJsonItem=t.getLocalStorageJsonItem=t.setLocalStorageJsonItem=void 0,t.setLocalStorageJsonItem=function(e,t){try{window.localStorage&&window.localStorage.setItem(e,JSON.stringify(t))}catch(e){}},t.getLocalStorageJsonItem=function(e){try{var t=window.localStorage&&window.localStorage.getItem(e);if("string"==typeof t){var n=JSON.parse(t);if(n&&"object"===(void 0===n?"undefined":o(n)))return n}}catch(e){}return null},t.removeLocalStorageJsonItem=function(e){try{window.localStorage&&window.localStorage.removeItem(e)}catch(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmlHttpRequest=void 0;var o=n(55);t.XmlHttpRequest=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReqestsCount=t.getRequestByIndex=t.iterator=t.timeout=t.error=t.resolve=t.unmock=t.mock=void 0;var o=window.XMLHttpRequest,i=!1;function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(e,Object.assign({status:200,response:t,responseText:JSON.stringify(t),responseType:"text"},n)),e.onload&&e.onload(new ProgressEvent("load"))}function a(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};d(e,Object.assign(Object.assign({},o),{status:t,responseText:n})),e.onerror&&e.onerror(new ProgressEvent("error"))}function s(e){l();var t=window.XMLHttpRequest.mock.instances[e];if(!t)throw new Error("Request with "+e+" was not found");return t}function c(){return l(),window.XMLHttpRequest.mock.instances.length}function l(){if(!i)throw new Error("You should mock first")}function u(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange(new Event("readystatechange"))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l(),!e)throw new Error("Request is undefined");if(2!==e.readyState)throw new Error("Request is resolved");Object.assign(e,t),u(e,4)}t.mock=function(){i||(i=!0,window.XMLHttpRequest=jest.fn().mockImplementation(function(){var e=this;this.getResponseHeader=jest.fn(),this.getAllResponseHeaders=jest.fn(),this.overrideMimeType=jest.fn(),this.setRequestHeader=jest.fn().mockImplementation(function(e,t){this.requestHeaders[e]=t}),this.requestHeaders={},this.status=0,this.readyState=0,this.abort=jest.fn(function(){u(e,0),e.onabort&&e.onabort(new ProgressEvent("abort"))}),this.open=jest.fn(function(){u(e,1)}),this.send=jest.fn(function(){if(1!==e.readyState)throw new Error("Failed to execute 'send' on 'XMLHttpRequest': The object's state must be OPENED.");u(e,2)})}))},t.unmock=function(){l(),i=!1,window.XMLHttpRequest=o},t.resolve=r,t.error=a,t.timeout=function(e){u(e,0),e.ontimeout&&e.ontimeout(new ProgressEvent("timeout"))},t.iterator=function(){l();var e=-1;return{size:function(){return c()},next:function(){var t=c();return e!==t-1&&(e=Math.min(e+1,t),!0)},value:function(){return s(e)},get:function(e){return s(e)},resolveNext:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!!this.next()&&(r(this.value(),e,t),!0)},errorNext:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!!this.next()&&(a(this.value(),e,t,n),!0)}}},t.getRequestByIndex=s,t.getReqestsCount=c},function(e,t,n){"use strict";function o(e){return(e.match(/\./g)||[]).length}Object.defineProperty(t,"__esModule",{value:!0}),t.replaceTld=t.getTld=t.isCookiedYandexTld=t.getYandexTld=t.URL_REGEX_YANDEX_TLD=t.YANDEX_TLD=void 0,t.YANDEX_TLD=["ua","ru","kz","by","com.tr","com","net","uz","fr","com.ge","az","com.am","co.il","kg","lv","lt","md","tj","tm","ee"].sort(function(e,t){return o(t)-o(e)}),t.URL_REGEX_YANDEX_TLD="yandex\\.("+t.YANDEX_TLD.map(function(e){return e.replace(/\./g,"\\.")}).join("|")+")";var i="ru";function r(e){var n=new RegExp(t.URL_REGEX_YANDEX_TLD+"$").exec(e);return n&&n[1]||""}function a(e){return e&&"net"!==e}function s(e){var t=r(e);return a(t)?t:i}t.getYandexTld=r,t.isCookiedYandexTld=a,t.getTld=s;var c=s(window.location.hostname);t.replaceTld=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;return e.replace(/\{tld\}/,t)}},function(e,t,n){"use strict";function o(e,t){return null==t||""===t?"":encodeURIComponent(e)+"="+encodeURIComponent(String(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.isYandexTeamHost=t.getOrigin=t.queryStringify=void 0,t.queryStringify=function(e,t){var n=-1===e.search(/\?/)?"?":"&",i=function(e){return e.map(function(e){var t=e.name,n=e.value;return Array.isArray(n)?n.map(function(e){return o(t,e)}).filter(Boolean).join("&"):o(t,n)}).filter(Boolean).join("&")}(Object.keys(t).map(function(e){return{name:e,value:t[e]}}));return e+(i?n+i:"")},t.getOrigin=function(){return window.location.origin||window.location.protocol+"//"+window.location.host},t.isYandexTeamHost=function(e){return-1!==e.search(/\.yandex-team\.ru$/)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUUID=t.guid=t.UUID_MASK=void 0;var o="xxxx-xxxx-xxxx-xxxx";function i(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:o).replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}t.UUID_MASK="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",t.guid=i,t.createUUID=function(){return i(t.UUID_MASK)}},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var i=n(20),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners=new Set}return o(e,[{key:"addListener",value:function(e){return!this.listeners.has(e)&&(this.listeners.add(e),!0)}},{key:"removeListener",value:function(e){return this.listeners.delete(e)}},{key:"removeAllListener",value:function(){this.listeners.clear()}},{key:"dispatch",value:function(t){var n=!0,o=!1,i=void 0;try{for(var r,a=this.listeners[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;try{var c=s(t);if(c&&c.stopPropagation)return}catch(t){e.errorHandler(t)}}}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}}}]),e}();t.Event=r,r.errorHandler=i.noop},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAxiosErrorData=void 0;t.getAxiosErrorData=function(e){var t,n,o,i,r,a,s,c,l,u,d,h,p,f,y,b,v,m;return function(e){return"config"in e}(e)?{type:"network",additional:{url:null==e?void 0:e.config.url,method:null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.method,data:null===(n=null==e?void 0:e.config)||void 0===n?void 0:n.data,status:null===(o=null==e?void 0:e.response)||void 0===o?void 0:o.status,code:(null===(a=null===(r=null===(i=null==e?void 0:e.response)||void 0===i?void 0:i.data)||void 0===r?void 0:r.data)||void 0===a?void 0:a.code)||(null==e?void 0:e.code),message:(null===(l=null===(c=null===(s=null==e?void 0:e.response)||void 0===s?void 0:s.data)||void 0===c?void 0:c.data)||void 0===l?void 0:l.message)||(null===(h=null===(d=null===(u=null==e?void 0:e.response)||void 0===u?void 0:u.data)||void 0===d?void 0:d.data)||void 0===h?void 0:h.text),retry:null===(p=null==e?void 0:e.config)||void 0===p?void 0:p.__retryCount,type:null===(f=e)||void 0===f?void 0:f.type},message:(null===(v=null===(b=null===(y=null==e?void 0:e.response)||void 0===y?void 0:y.data)||void 0===b?void 0:b.data)||void 0===v?void 0:v.message)||(null===(m=null==e?void 0:e.response)||void 0===m?void 0:m.status)}:{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jitterFactory=void 0,t.jitterFactory=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,o=Math.random()>.5?1:-1;return Math.max(0,n+Math.random()*t*o)}}},function(e,t,n){"use strict";function o(e){return void 0!==e}Object.defineProperty(t,"__esModule",{value:!0}),t.withDefault=t.assertDefined=t.isDefined=void 0,t.isDefined=o,t.assertDefined=function(e,t){if(void 0===e)throw new Error(t)},t.withDefault=function(e,t){return o(e)?e:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attachRef=void 0,t.attachRef=function(e){return function(t,n){Object.defineProperty(t,n,{configurable:!0,get:function(){var t=this,o=function(n){o.current=n;var i=t.props[e];i&&("function"==typeof i?i(n):"object"==typeof i&&(i.current=n))};return o.current=null,Object.defineProperty(this,n,{configurable:!0,value:o}),o}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bind=void 0,t.bind=function(e,t,n){if("function"==typeof e)throw new TypeError("Cannot bind static method "+t);var o=n.value,i=!1;return{configurable:!0,get:function(){if(i)return o;var e=o.bind(this);return i=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return e}}),i=!1,e}}}},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.RequestsBucket=void 0;var i=n(21),r=n(22),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.RequestTimeoutError;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.RequestTimeoutErrorCtr=t,this.awaiters=new Map,this.seqNo=1}return o(e,[{key:"event",value:function(e){var t=e(this.seqNo);return this.seqNo++,t}},{key:"request",value:function(e,t){var n=this;return new Promise(function(o,r){var a=e(n.seqNo);n.seqNo++;var s=new i.Request(function(e,t){n.remove(a),e?r(e):o(t)},t,n.RequestTimeoutErrorCtr);n.awaiters.set(a,s)})}},{key:"result",value:function(e,t,n){var o=this.awaiters.get(e);return!!o&&(t?o.result(t):o.result(void 0,n),!0)}},{key:"drop",value:function(e){this.awaiters.forEach(function(t){return t.result(e)}),this.awaiters.clear(),this.seqNo=1}},{key:"remove",value:function(e){return this.awaiters.delete(e)}}]),e}();t.RequestsBucket=a},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(a<3?r(s):a>3?r(t,n,s):r(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var a=n(1),s=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callback=t,this.timeout=n,this.step=o,this.timeoutId=void 0,this.endTime=0,this.endTime=Date.now()+n,this.tick()}return o(e,[{key:"cancel",value:function(){this.timeoutId&&clearTimeout(this.timeoutId)}},{key:"tick",value:function(){var e=Date.now();if(this.endTime<=e||this.timeout<=0)return this.timeoutId=void 0,void this.callback();this.timeoutId=setTimeout(this.tick,this.endTime-e>this.step?this.step:this.endTime-e)}}]),e}();r([a.bind],s.prototype,"tick",null),t.Timer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggableError=t.ErrorVisitor=t.createHandler=t.BaseError=void 0;var o=n(24);Object.defineProperty(t,"BaseError",{enumerable:!0,get:function(){return o.BaseError}});var i=n(25);Object.defineProperty(t,"createHandler",{enumerable:!0,get:function(){return i.createHandler}}),Object.defineProperty(t,"ErrorVisitor",{enumerable:!0,get:function(){return i.ErrorVisitor}});var r=n(68);Object.defineProperty(t,"LoggableError",{enumerable:!0,get:function(){return r.LoggableError}})},function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LoggableError=void 0;var r=function(e){function t(n,o,i){var r=e.call(this,n)||this;return r.loggerFields=o,r.additional=o&&o.additional,i&&(r.stack=i),Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t}(n(24).BaseError);t.LoggableError=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnreadCounter=void 0;var o=n(45),i=n(87),r=n(16),a=function(){function e(e){this.isStarted=!1,this.needFetch=!1,this.reqNum=0,this.rn=Math.floor(1e6*Math.random()),this.timeout=r.MIN_UNREAD_TIMEOUT,this.timeoutId=-1,this.params=e,this.fetch=this.fetch.bind(this),this.handleOnline=this.handleOnline.bind(this),this.handleVisibilityChange=this.handleVisibilityChange.bind(this)}return Object.defineProperty(e.prototype,"shouldUseSavedData",{get:function(){return(!this.params.ns||0===this.params.ns.length)&&void 0===this.params.workspaceId},enumerable:!1,configurable:!0}),e.prototype.start=function(){!this.isStarted&&this.params.url&&window.navigator.cookieEnabled&&(this.isStarted=!0,this.bindEvents(),this.fetch())},e.prototype.stop=function(){this.isStarted=!1,this.clearTimeout(),this.unbindEvents()},e.prototype.removeData=function(){o.removeLocalStorageJsonItem(r.LOCAL_STORAGE_KEY_NAME)},e.prototype.fetch=function(){if(this.clearTimeout(),document.hidden||!window.navigator.onLine)return this.needFetch=!0,void this.retryFetch();if(this.needFetch=!1,this.shouldUseSavedData){var e=o.getLocalStorageJsonItem(r.LOCAL_STORAGE_KEY_NAME);if(i.isValidLocalStorageData(e))return this.runCallback(e.response),void(this.timeoutId=window.setTimeout(this.fetch,i.getLocalStorageTimeout(e)))}this.makeRequest()},e.prototype.retryFetch=function(){this.clearTimeout(),this.timeoutId=window.setTimeout(this.fetch,this.timeout)},e.prototype.bindEvents=function(){document.addEventListener("visibilitychange",this.handleVisibilityChange,!1),window.addEventListener("online",this.handleOnline,!1)},e.prototype.unbindEvents=function(){document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1),window.removeEventListener("online",this.handleOnline,!1)},e.prototype.handleVisibilityChange=function(){this.needFetch&&!document.hidden&&this.fetch()},e.prototype.handleOnline=function(){this.needFetch&&this.fetch()},e.prototype.makeRequest=function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.getUrl(),!0),t.withCredentials=!0,t.onload=function(){if(e.isStarted)if(200===t.status){var n;try{n=JSON.parse(t.responseText)}catch(e){n=null}if(n&&"object"==typeof n){if("Status"in n)return void e.handleError(n);if("Ttl"in n)return void e.handleResponse(n)}e.stop()}else e.handleError({Status:t.status})},t.onerror=t.onabort=t.ontimeout=function(){return e.handleError({Status:t.status})},t.send(null)},e.prototype.runCallback=function(e){"Ttl"in e&&!("Status"in e)&&this.params.callback({lastTimestamp:e.LastUnreadTsMcs,value:e.UnreadCount||0,valueForChat:e.ChatUnreadCount||0})},e.prototype.getUrl=function(){this.reqNum++;var e=this.params,t=e.serviceId,n=e.workspaceId,r=e.url,a=e.chatId,s=e.guid,c=e.ns;return o.queryStringify(r,{all_ns:i.getServiceNamespace(t),parentOrigin:o.getOrigin(),rn:this.rn,reqNum:this.reqNum,chat_id:a,other_guid:s,serviceId:t,client:n,ns:c})},e.prototype.clearTimeout=function(){window.clearTimeout(this.timeoutId)},e.prototype.handleResponse=function(e){this.runCallback(e),this.timeout=1e3*i.prepareTtl(e.Ttl),this.saveData(e,this.timeout),this.retryFetch()},e.prototype.handleError=function(e){this.timeout=i.getErrorTimeout(e.Status,this.timeout),this.saveData(e,this.timeout),this.retryFetch()},e.prototype.saveData=function(e,t){if(this.shouldUseSavedData){var n=Date.now();o.setLocalStorageJsonItem(r.LOCAL_STORAGE_KEY_NAME,{currentTimestamp:n,expiredTimestamp:n+t,hasAuth:o.hasAuth(),response:e})}},e}();t.UnreadCounter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=void 0;t.noop=(()=>{})},function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(69);t.default=r.UnreadCounter,i(n(88),t),i(n(89),t),i(n(90),t)},function(e,t,n){"use strict";var o=n(71),i=n.n(o),r=n(2),a="https://yandex.{tld}/chat?build=chamb";var s={name:"yandex",badgeMaxCount:99,badgeType:"num",buttonIcon:"colored",buttonIconByTheme:{light:"colored",dark:"white"},collapsedDesktop:"hover",collapsedTouch:"always",iframeUrl:a,iframeAllow:["microphone","camera"],lang:"ru",theme:"light",unreadUrl:"https://yandex.{tld}/messenger/api/unread_count",openNative:!0,fullscreen:!1,unreadCounterControllerFactory:function(){return function(e){return new i.a(e)}}};Object(r.b)({page:s.name,additional:s}),t.a=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasAuth=void 0,t.hasAuth=function(){return-1!==document.cookie.search(/(^|; )yandex_login=[^;]+/)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t,n=!1){let o,i,r;function a(){const t=i,n=r;i=void 0,r=void 0,t&&e.call(n,...t)}const s=function(...e){i=e,r=this,o?clearTimeout(o):n&&a(),o=setTimeout(()=>{o=void 0,n||a()},t)};return s.cancel=(()=>{i=void 0,r=void 0,o&&(clearTimeout(o),o=void 0)}),s.flush=(()=>{o&&(clearTimeout(o),o=void 0),a()}),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeRemoveNode=void 0,t.safeRemoveNode=function(e){try{e&&e.parentNode&&e.parentNode.removeChild(e)}catch(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isServiceWorkerSupported=void 0,t.isServiceWorkerSupported=Boolean("undefined"!=typeof navigator&&"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener&&navigator.serviceWorker.removeEventListener)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeLocalStorageJsonItem=t.getLocalStorageJsonItem=t.setLocalStorageJsonItem=void 0,t.setLocalStorageJsonItem=function(e,t){try{window.localStorage&&window.localStorage.setItem(e,JSON.stringify(t))}catch(e){}},t.getLocalStorageJsonItem=function(e){try{const t=window.localStorage&&window.localStorage.getItem(e);if("string"==typeof t){const e=JSON.parse(t);if(e&&"object"==typeof e)return e}}catch(e){}return null},t.removeLocalStorageJsonItem=function(e){try{window.localStorage&&window.localStorage.removeItem(e)}catch(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmlHttpRequest=void 0;const o=n(79);t.XmlHttpRequest=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReqestsCount=t.getRequestByIndex=t.iterator=t.timeout=t.error=t.resolve=t.unmock=t.mock=void 0;const o=window.XMLHttpRequest;let i=!1;function r(e,t,n={}){d(e,Object.assign({status:200,response:t,responseText:JSON.stringify(t),responseType:"text"},n)),e.onload&&e.onload(new ProgressEvent("load"))}function a(e,t,n,o={}){d(e,Object.assign(Object.assign({},o),{status:t,responseText:n})),e.onerror&&e.onerror(new ProgressEvent("error"))}function s(e){l();const t=window.XMLHttpRequest.mock.instances[e];if(!t)throw new Error(`Request with ${e} was not found`);return t}function c(){return l(),window.XMLHttpRequest.mock.instances.length}function l(){if(!i)throw new Error("You should mock first")}function u(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange(new Event("readystatechange"))}function d(e,t={}){if(l(),!e)throw new Error("Request is undefined");if(2!==e.readyState)throw new Error("Request is resolved");Object.assign(e,t),u(e,4)}t.mock=function(){i||(i=!0,window.XMLHttpRequest=jest.fn().mockImplementation(function(){this.getResponseHeader=jest.fn(),this.getAllResponseHeaders=jest.fn(),this.overrideMimeType=jest.fn(),this.setRequestHeader=jest.fn().mockImplementation(function(e,t){this.requestHeaders[e]=t}),this.requestHeaders={},this.status=0,this.readyState=0,this.abort=jest.fn(()=>{u(this,0),this.onabort&&this.onabort(new ProgressEvent("abort"))}),this.open=jest.fn(()=>{u(this,1)}),this.send=jest.fn(()=>{if(1!==this.readyState)throw new Error("Failed to execute 'send' on 'XMLHttpRequest': The object's state must be OPENED.");u(this,2)})}))},t.unmock=function(){l(),i=!1,window.XMLHttpRequest=o},t.resolve=r,t.error=a,t.timeout=function(e){u(e,0),e.ontimeout&&e.ontimeout(new ProgressEvent("timeout"))},t.iterator=function(){l();let e=-1;return{size:()=>c(),next(){const t=c();return e!==t-1&&(e=Math.min(e+1,t),!0)},value:()=>s(e),get:e=>s(e),resolveNext(e,t={}){return!!this.next()&&(r(this.value(),e,t),!0)},errorNext(e,t="",n={}){return!!this.next()&&(a(this.value(),e,t,n),!0)}}},t.getRequestByIndex=s,t.getReqestsCount=c},function(e,t,n){"use strict";function o(e){return(e.match(/\./g)||[]).length}Object.defineProperty(t,"__esModule",{value:!0}),t.replaceTld=t.getTld=t.isCookiedYandexTld=t.getYandexTld=t.URL_REGEX_YANDEX_TLD=t.YANDEX_TLD=void 0,t.YANDEX_TLD=["ua","ru","kz","by","com.tr","com","net","uz","fr","com.ge","az","com.am","co.il","kg","lv","lt","md","tj","tm","ee"].sort(function(e,t){return o(t)-o(e)}),t.URL_REGEX_YANDEX_TLD="yandex\\.("+t.YANDEX_TLD.map(function(e){return e.replace(/\./g,"\\.")}).join("|")+")";const i="ru";function r(e){const n=new RegExp(`${t.URL_REGEX_YANDEX_TLD}$`).exec(e);return n&&n[1]||""}function a(e){return e&&"net"!==e}function s(e){const t=r(e);return a(t)?t:i}t.getYandexTld=r,t.isCookiedYandexTld=a,t.getTld=s;const c=s(window.location.hostname);t.replaceTld=function(e,t=c){return e.replace(/\{tld\}/,t)}},function(e,t,n){"use strict";function o(e,t){return null==t||""===t?"":encodeURIComponent(e)+"="+encodeURIComponent(String(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.isYandexTeamHost=t.getOrigin=t.queryStringify=void 0,t.queryStringify=function(e,t){const n=-1===e.search(/\?/)?"?":"&",i=function(e){return e.map(e=>{const t=e.name,n=e.value;return Array.isArray(n)?n.map(e=>o(t,e)).filter(Boolean).join("&"):o(t,n)}).filter(Boolean).join("&")}(Object.keys(t).map(e=>({name:e,value:t[e]})));return e+(i?n+i:"")},t.getOrigin=function(){return window.location.origin||window.location.protocol+"//"+window.location.host},t.isYandexTeamHost=function(e){return-1!==e.search(/\.yandex-team\.ru$/)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUUID=t.guid=t.UUID_MASK=void 0;const o="xxxx-xxxx-xxxx-xxxx";function i(e=o){return e.replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}t.UUID_MASK="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",t.guid=i,t.createUUID=function(){return i(t.UUID_MASK)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;const o=n(70);class i{constructor(){this.listeners=new Set}addListener(e){return!this.listeners.has(e)&&(this.listeners.add(e),!0)}removeListener(e){return this.listeners.delete(e)}removeAllListener(){this.listeners.clear()}dispatch(e){for(const t of this.listeners)try{const n=t(e);if(n&&n.stopPropagation)return}catch(e){i.errorHandler(e)}}}t.Event=i,i.errorHandler=o.noop},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAxiosErrorData=void 0;t.getAxiosErrorData=(e=>{var t,n,o,i,r,a,s,c,l,u,d,h,p,f,y,b,v,m;return function(e){return"config"in e}(e)?{type:"network",additional:{url:null==e?void 0:e.config.url,method:null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.method,data:null===(n=null==e?void 0:e.config)||void 0===n?void 0:n.data,status:null===(o=null==e?void 0:e.response)||void 0===o?void 0:o.status,code:(null===(a=null===(r=null===(i=null==e?void 0:e.response)||void 0===i?void 0:i.data)||void 0===r?void 0:r.data)||void 0===a?void 0:a.code)||(null==e?void 0:e.code),message:(null===(l=null===(c=null===(s=null==e?void 0:e.response)||void 0===s?void 0:s.data)||void 0===c?void 0:c.data)||void 0===l?void 0:l.message)||(null===(h=null===(d=null===(u=null==e?void 0:e.response)||void 0===u?void 0:u.data)||void 0===d?void 0:d.data)||void 0===h?void 0:h.text),retry:null===(p=null==e?void 0:e.config)||void 0===p?void 0:p.__retryCount,type:null===(f=e)||void 0===f?void 0:f.type},message:(null===(v=null===(b=null===(y=null==e?void 0:e.response)||void 0===y?void 0:y.data)||void 0===b?void 0:b.data)||void 0===v?void 0:v.message)||(null===(m=null==e?void 0:e.response)||void 0===m?void 0:m.status)}:{}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jitterFactory=void 0,t.jitterFactory=function(e,t){return(n=e)=>{const o=Math.random()>.5?1:-1;return Math.max(0,n+Math.random()*t*o)}}},function(e,t,n){"use strict";function o(e){return void 0!==e}Object.defineProperty(t,"__esModule",{value:!0}),t.withDefault=t.assertDefined=t.isDefined=void 0,t.isDefined=o,t.assertDefined=function(e,t){if(void 0===e)throw new Error(t)},t.withDefault=function(e,t){return o(e)?e:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorTimeout=t.prepareTtl=t.isValidLocalStorageData=t.getLocalStorageTimeout=t.getServiceNamespace=void 0;var o=n(45),i=n(16);t.getServiceNamespace=function(e){return e===i.HEALTH_SERVICE_ID?i.HEALTH_NAMESPACE:void 0},t.getLocalStorageTimeout=function(e){return e.expiredTimestamp-Date.now()},t.isValidLocalStorageData=function(e){var t=Date.now();return Boolean(e&&e.currentTimestamp<t&&t<e.expiredTimestamp&&e.expiredTimestamp-t<=i.MAX_UNREAD_TIMEOUT&&e.hasAuth===o.hasAuth())},t.prepareTtl=function(e){return e<i.MIN_UNREAD_TTL?i.MIN_UNREAD_TTL:e>i.MAX_UNREAD_TTL?i.MAX_UNREAD_TTL:e},t.getErrorTimeout=function(e,t){var n=Math.max(i.MIN_UNREAD_TIMEOUT,t);return 401===e||403===e?i.MAX_UNREAD_TIMEOUT:Math.min(2*n,i.MAX_UNREAD_TIMEOUT)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.UnreadCounterIframe=void 0;var r=n(69),a=n(16),s=function(){function e(){var e=this;this.handleMessage=function(t){var n=t.data;if(n&&n.namespace===a.MESSAGES_NAMESPACE)switch(n.type){case"start":e.start(n.payload);break;case"stop":e.stop();break;case"removeData":e.removeData();break;default:return}},this.callback=function(t){e.send("counter",t)},window.addEventListener("message",this.handleMessage)}return e.prototype.send=function(e,t){window.parent.postMessage({widgetId:this.widgetId,type:e,namespace:a.MESSAGES_NAMESPACE,payload:t},"*")},e.prototype.start=function(e){var t,n=e.widgetId,a=i(e,["widgetId"]);this.widgetId=n,this.controller&&this.controller.stop(),this.controller=new r.UnreadCounter(o(o({},a),{callback:this.callback})),null===(t=this.controller)||void 0===t||t.start()},e.prototype.stop=function(){var e;null===(e=this.controller)||void 0===e||e.stop()},e.prototype.removeData=function(){var e;null===(e=this.controller)||void 0===e||e.removeData()},e}();t.UnreadCounterIframe=s},function(e,t,n){"use strict";var o=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.UnreadCounterIframeClient=void 0;var i=n(45),r=n(16),a=function(){function e(e){var t=this;this.params=e,this.delayedMessages=[],this.isReady=!1,this.handleMessage=function(e){var n=e.data;if(n&&n.widgetId===t.params.widgetId&&n.namespace===r.MESSAGES_NAMESPACE)switch(n.type){case"counter":t.params.callback(n.payload);break;default:return}},this.create()}return e.prototype.create=function(){var e=this;this.iframe=document.createElement("iframe"),this.iframe.setAttribute("scrolling","no"),this.iframe.src=i.replaceTld(this.params.iframeUrl),this.iframe.style.visibility="hidden",this.iframe.style.position="absolute",this.iframe.style.border="none",this.iframe.style.height="0",this.iframe.style.width="0",this.iframe.style.top="-100000px",this.iframe.style.left="-100000px",this.origin=new URL(this.iframe.src).origin,window.addEventListener("message",this.handleMessage),this.iframe.onload=function(){e.isReady=!0,e.sendDelayedMessages()},document.body.append(this.iframe)},e.prototype.start=function(){this.delayedMessages=[];var e=this.params,t=(e.callback,e.iframeUrl,o(e,["callback","iframeUrl"]));this.send("start",t)},e.prototype.stop=function(){this.delayedMessages=[],this.send("stop",void 0)},e.prototype.removeData=function(){this.delayedMessages=[],this.send("removeData",void 0)},e.prototype.send=function(e,t){this.isReady?this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.postMessage({namespace:r.MESSAGES_NAMESPACE,type:e,widgetId:this.params.widgetId,payload:t},this.origin):this.delayedMessages.push({type:e,payload:t})},e.prototype.sendDelayedMessages=function(){var e=this;this.delayedMessages.forEach(function(t){e.send(t.type,t.payload)}),this.delayedMessages=[]},e.prototype.destroy=function(){this.isReady=!1,this.delayedMessages=[],i.safeRemoveNode(this.iframe),delete this.iframe,delete this.params},e}();t.UnreadCounterIframeClient=a},,,,function(e,t){e.exports="@font-face{font-family:YS Text Chat Widget;src:url(//yastatic.net/s3/home/fonts/ys/1/text-medium.woff2) format(\"woff2\"),url(//yastatic.net/s3/home/fonts/ys/1/text-medium.woff) format(\"woff\");font-weight:500;font-style:normal;font-stretch:normal}.ya-chat-disable-page-scroll{overscroll-behavior:none!important;overflow:hidden}.ya-chat-disable-page-scroll_ios{position:fixed;left:0;top:0;right:0}.ya-chat-widget__mount{position:relative;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;width:100%;border-radius:inherit;overflow:hidden;z-index:10}.ya-chat-widget_theme_legacy{position:relative;width:35px;height:35px}.ya-chat-widget_theme_dark,.ya-chat-widget_theme_light{position:fixed;top:auto;right:var(--yandex-mssngr-widget-button-offset-right,20px);bottom:var(--yandex-mssngr-widget-button-offset-bottom,20px);z-index:10000}.ya-chat-widget_theme_dark.ya-chat-widget_shadow,.ya-chat-widget_theme_light.ya-chat-widget_shadow{-webkit-box-shadow:0 -2px 6px rgba(14,21,47,.03),0 6px 18px rgba(14,21,47,.13);box-shadow:0 -2px 6px rgba(14,21,47,.03),0 6px 18px rgba(14,21,47,.13)}.ya-chat-widget_theme_dark.ya-chat-widget_desktop,.ya-chat-widget_theme_light.ya-chat-widget_desktop{display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;min-width:40px;height:40px;border-radius:13px;-webkit-transition:border-radius .4s ease,-webkit-box-shadow .4s ease;transition:border-radius .4s ease,-webkit-box-shadow .4s ease;-o-transition:border-radius .4s ease,box-shadow .4s ease;transition:border-radius .4s ease,box-shadow .4s ease;transition:border-radius .4s ease,box-shadow .4s ease,-webkit-box-shadow .4s ease}@media screen and (max-height:560px){.ya-chat-widget_theme_dark.ya-chat-widget_desktop,.ya-chat-widget_theme_light.ya-chat-widget_desktop{max-height:calc(100vh - 40px)}}.ya-chat-widget_theme_dark.ya-chat-widget_desktop.ya-chat-widget_visible,.ya-chat-widget_theme_light.ya-chat-widget_desktop.ya-chat-widget_visible{border-radius:8px}.ya-chat-widget_theme_dark.ya-chat-widget_desktop.ya-chat-widget_theme_light,.ya-chat-widget_theme_light.ya-chat-widget_desktop.ya-chat-widget_theme_light{background-color:var(--yandex-mssngr-widget-loader-background-color,#fff)}.ya-chat-widget_theme_dark.ya-chat-widget_desktop.ya-chat-widget_theme_dark,.ya-chat-widget_theme_light.ya-chat-widget_desktop.ya-chat-widget_theme_dark{background-color:var(--yandex-mssngr-widget-loader-background-color,#292c33)}.ya-chat-widget_theme_dark.ya-chat-widget_size_large,.ya-chat-widget_theme_light.ya-chat-widget_size_large{min-width:60px;height:60px;border-radius:19.5px}.ya-chat-widget_theme_dark.ya-chat-widget_fullscreen,.ya-chat-widget_theme_light.ya-chat-widget_fullscreen{position:fixed;top:0;right:0;bottom:0;left:0;-webkit-transform:none;transform:none;width:100vw;min-width:100vw;height:100vh;min-height:100vh}.ya-chat-widget_theme_hidden{position:fixed;top:auto;right:20px;bottom:20px;z-index:10000}.ya-chat-widget_theme_hidden.ya-chat-widget_fullscreen{top:0;right:0;bottom:0;left:0;-webkit-transform:none;transform:none;width:100vw;min-width:100vw;height:100vh;min-height:100vh}.ya-chat-paranja{position:fixed;top:0;right:0;bottom:0;left:0;z-index:10005;display:none;visibility:hidden;-webkit-transition:opacity .32s ease .08s,visibility 0s ease .4s;-o-transition:opacity .32s ease .08s,visibility 0s ease .4s;transition:opacity .32s ease .08s,visibility 0s ease .4s;opacity:0;background-color:rgba(0,0,0,.56);-webkit-tap-highlight-color:rgba(0,0,0,0)}.ya-chat-paranja_visible{visibility:visible;-webkit-transition-delay:0s;-o-transition-delay:0s;transition-delay:0s;opacity:1}.ya-chat-paranja_mobile{display:block}.ya-chat-popup{z-index:10010;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;background-color:#fff;color:#292c33}.ya-chat-popup__content-wrapper{display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;border-radius:inherit}.ya-chat-popup_position_static{position:absolute;bottom:0;right:0}.ya-chat-popup_position_target{position:fixed;left:-9999px;top:-9999px}.ya-chat-popup_position_absolute{position:absolute;left:-9999px;top:-9999px}.ya-chat-popup_position_fixed{position:fixed;left:0;top:40px;bottom:0;right:0;border-radius:0;overflow:visible}.ya-chat-popup_visible{pointer-events:auto}.ya-chat-popup.ya-chat-popup_visible.ya-chat-popup_fullscreen{position:static;min-width:100%;min-height:100%;border-radius:0}.ya-chat-popup.ya-chat-popup_visible.ya-chat-popup_fullscreen.ya-chat-popup_position_fixed,.ya-chat-popup.ya-chat-popup_visible.ya-chat-popup_fullscreen.ya-chat-popup_position_target{position:fixed;top:0;left:0}.ya-chat-popup.ya-chat-popup_visible.ya-chat-popup_fullscreen .ya-chat-popup__content-wrapper{min-width:100vw;min-height:100vh}.ya-chat-popup_mobile{opacity:0;pointer-events:none;-webkit-transform:translateY(100%);transform:translateY(100%);-webkit-transition:opacity .4s ease,-webkit-transform .4s ease;transition:opacity .4s ease,-webkit-transform .4s ease;-o-transition:transform .4s ease,opacity .4s ease;transition:transform .4s ease,opacity .4s ease;transition:transform .4s ease,opacity .4s ease,-webkit-transform .4s ease}.ya-chat-popup_mobile.ya-chat-popup_visible{-webkit-transform:translateY(0);transform:translateY(0);pointer-events:auto;opacity:1}.ya-chat-popup_theme_hidden.ya-chat-popup_desktop,.ya-chat-popup_theme_legacy.ya-chat-popup_desktop{overflow:visible;-webkit-transform:scale(0);transform:scale(0);opacity:0;-webkit-transition:opacity .1s,-webkit-transform 0s .1s;transition:opacity .1s,-webkit-transform 0s .1s;-o-transition:opacity .1s,transform 0s .1s;transition:opacity .1s,transform 0s .1s;transition:opacity .1s,transform 0s .1s,-webkit-transform 0s .1s;border-radius:4px;-webkit-box-shadow:0 10px 20px -5px rgba(0,0,0,.4),0 0 0 1px rgba(0,0,0,.06);box-shadow:0 10px 20px -5px rgba(0,0,0,.4),0 0 0 1px rgba(0,0,0,.06)}.ya-chat-popup_theme_hidden.ya-chat-popup_desktop.ya-chat-popup_visible,.ya-chat-popup_theme_legacy.ya-chat-popup_desktop.ya-chat-popup_visible{-webkit-transform:scale(1);transform:scale(1);opacity:1;-webkit-transition:opacity .1s;-o-transition:opacity .1s;transition:opacity .1s}.ya-chat-popup:not(.ya-chat-popup_fullscreen).ya-chat-popup_theme_hidden.ya-chat-popup_desktop .ya-chat-popup__content-wrapper{width:420px;min-width:360px;height:600px;max-height:calc(100vh - 40px);max-width:calc(100vw - 40px)}.ya-chat-popup:not(.ya-chat-popup_fullscreen).ya-chat-popup_theme_legacy.ya-chat-popup_desktop .ya-chat-popup__content-wrapper{width:420px;min-width:360px;height:600px;max-height:calc(100vh - 80px);max-width:calc(100vw - 80px)}.ya-chat-popup_theme_dark.ya-chat-popup_desktop,.ya-chat-popup_theme_light.ya-chat-popup_desktop{overflow:hidden;border-radius:inherit;max-width:100%;max-height:100%;z-index:0;-webkit-box-shadow:0 -2px 6px rgba(14,21,47,.03),0 6px 18px rgba(14,21,47,.13);box-shadow:0 -2px 6px rgba(14,21,47,.03),0 6px 18px rgba(14,21,47,.13);-webkit-transition:max-width .4s ease,max-height .4s ease,-webkit-box-shadow .4s ease;transition:max-width .4s ease,max-height .4s ease,-webkit-box-shadow .4s ease;-o-transition:max-width .4s ease,max-height .4s ease,box-shadow .4s ease;transition:max-width .4s ease,max-height .4s ease,box-shadow .4s ease;transition:max-width .4s ease,max-height .4s ease,box-shadow .4s ease,-webkit-box-shadow .4s ease}.ya-chat-popup_theme_dark.ya-chat-popup_desktop:not(.ya-chat-popup_fullscreen),.ya-chat-popup_theme_light.ya-chat-popup_desktop:not(.ya-chat-popup_fullscreen){min-width:100%;min-height:100%}.ya-chat-popup_theme_dark.ya-chat-popup_desktop:not(.ya-chat-popup_fullscreen) .ya-chat-popup__content-wrapper,.ya-chat-popup_theme_light.ya-chat-popup_desktop:not(.ya-chat-popup_fullscreen) .ya-chat-popup__content-wrapper{width:360px;min-width:360px;max-width:calc(100vw - 40px);height:520px;max-height:calc(100vh - 40px);opacity:0;-webkit-transition:opacity .32s ease;-o-transition:opacity .32s ease;transition:opacity .32s ease}.ya-chat-popup_theme_light{background-color:var(--yandex-mssngr-widget-loader-background-color,#fff)}.ya-chat-popup_theme_dark{background-color:var(--yandex-mssngr-widget-loader-background-color,#292c33)}.ya-chat-popup_theme_dark.ya-chat-popup_desktop.ya-chat-popup_visible,.ya-chat-popup_theme_light.ya-chat-popup_desktop.ya-chat-popup_visible{-webkit-box-shadow:0 10px 20px -5px rgba(0,0,0,.4),0 0 0 1px rgba(0,0,0,.06);box-shadow:0 10px 20px -5px rgba(0,0,0,.4),0 0 0 1px rgba(0,0,0,.06);max-width:calc(100vw - 40px);max-height:calc(100vh - 40px)}.ya-chat-popup_theme_dark.ya-chat-popup_desktop.ya-chat-popup_visible:not(.ya-chat-popup_fullscreen),.ya-chat-popup_theme_light.ya-chat-popup_desktop.ya-chat-popup_visible:not(.ya-chat-popup_fullscreen){min-width:0;min-height:0}.ya-chat-popup_theme_dark.ya-chat-popup_desktop.ya-chat-popup_visible .ya-chat-popup__content-wrapper,.ya-chat-popup_theme_light.ya-chat-popup_desktop.ya-chat-popup_visible .ya-chat-popup__content-wrapper{opacity:1;-webkit-transition:opacity .32s ease .08s;-o-transition:opacity .32s .08s ease;transition:opacity .32s ease .08s}.ya-chat-badge{position:absolute;-webkit-transition:-webkit-transform .08s ease-out;transition:-webkit-transform .08s ease-out;-o-transition:transform .08s ease-out;transition:transform .08s ease-out;transition:transform .08s ease-out,-webkit-transform .08s ease-out;-webkit-transform:scale(0);transform:scale(0)}.ya-chat-badge_has-count{-webkit-transform:scale(1);transform:scale(1)}.ya-chat-badge_type_dot{bottom:auto;left:auto;width:8px;height:8px;-webkit-box-sizing:content-box;box-sizing:content-box;border:2px solid #fff;border-radius:50%;background-clip:padding-box;background-color:red}.ya-chat-badge_type_dot .ya-chat-badge__count{display:none}.ya-chat-badge__count{font-size:13px;font-weight:700;line-height:15px;color:#fff;vertical-align:middle;text-align:center;border-radius:15px;cursor:pointer;padding:0 4px;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:red}.ya-chat-badge_theme_legacy{top:3px;right:3px}.ya-chat-badge_theme_dark,.ya-chat-badge_theme_light{top:-3px;right:-3px}.ya-chat-button{display:block;visibility:visible;cursor:pointer;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none}.ya-chat-button_mobile{top:12px;left:12px}.ya-chat-button__container{display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-align-items:center;-ms-flex-align:center;align-items:center;cursor:pointer}.ya-chat-button__text{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;overflow:hidden;cursor:pointer}.ya-chat-button__text-container{overflow:hidden;padding-left:8px;font-size:14px;font-weight:500;line-height:20px;vertical-align:middle;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;cursor:pointer}.ya-chat-button_theme_legacy{width:100%;height:100%}.ya-chat-button_theme_legacy .ya-chat-button__container{padding:0 7px;height:100%}.ya-chat-button_theme_legacy .ya-chat-button__text{display:none}.ya-chat-button_theme_legacy .ya-chat-icon{width:21px;height:21px}.ya-chat-button_theme_legacy:active .ya-chat-icon{-webkit-transform:scale(.9);transform:scale(.9)}.ya-chat-button_theme_dark,.ya-chat-button_theme_light{position:relative;-webkit-transition:opacity .08s ease .32s;-o-transition:opacity .08s .32s ease;transition:opacity .08s ease .32s;z-index:1}.ya-chat-button_theme_dark.ya-chat-button_hidden,.ya-chat-button_theme_light.ya-chat-button_hidden{-webkit-transition:opacity .08s ease;-o-transition:opacity .08s ease;transition:opacity .08s ease;opacity:0;pointer-events:none}.ya-chat-button_theme_dark .ya-chat-button__container,.ya-chat-button_theme_light .ya-chat-button__container{vertical-align:top;white-space:nowrap;padding-left:8px;padding-right:10px;height:40px;max-width:280px;-webkit-transform-origin:100% 50%;transform-origin:100% 50%;border-radius:13px;-webkit-box-sizing:border-box;box-sizing:border-box}.ya-chat-button_theme_dark .ya-chat-button__container_size_large,.ya-chat-button_theme_light .ya-chat-button__container_size_large{height:60px;max-width:420px;border-radius:19.5px}.ya-chat-button_theme_dark.ya-chat-button_desktop .ya-chat-button__container:after,.ya-chat-button_theme_light.ya-chat-button_desktop .ya-chat-button__container:after{content:\"\";position:absolute;top:0;left:0;width:calc(100% + 20px);height:calc(100% + 20px)}.ya-chat-button_theme_dark.ya-chat-button_mobile .ya-chat-button__container,.ya-chat-button_theme_light.ya-chat-button_mobile .ya-chat-button__container{-webkit-box-shadow:0 6px 20px -5px rgba(0,0,0,.4),0 0 0 1px rgba(0,0,0,.06);box-shadow:0 6px 20px -5px rgba(0,0,0,.4),0 0 0 1px rgba(0,0,0,.06)}.ya-chat-button_theme_dark.ya-chat-button_mobile .ya-chat-button__container:after,.ya-chat-button_theme_light.ya-chat-button_mobile .ya-chat-button__container:after{content:\"\";position:absolute;left:-12px;top:-12px;width:calc(100% + 24px);height:calc(100% + 24px)}.ya-chat-button_theme_dark.ya-chat-button_collapsed_always .ya-chat-button__container,.ya-chat-button_theme_light.ya-chat-button_collapsed_always .ya-chat-button__container{padding-left:6px;padding-right:6px}.ya-chat-button_theme_dark.ya-chat-button_collapsed_always .ya-chat-button__container_size_large,.ya-chat-button_theme_light.ya-chat-button_collapsed_always .ya-chat-button__container_size_large{padding-left:9px;padding-right:9px}.ya-chat-button_theme_dark.ya-chat-button_collapsed_always .ya-chat-button__text,.ya-chat-button_theme_light.ya-chat-button_collapsed_always .ya-chat-button__text{display:none}.ya-chat-button_theme_dark.ya-chat-button_collapsed_hover .ya-chat-button__text,.ya-chat-button_theme_light.ya-chat-button_collapsed_hover .ya-chat-button__text{-webkit-transition:opacity .4s ease;-o-transition:opacity .4s ease;transition:opacity .4s ease}.ya-chat-button_theme_dark.ya-chat-button_collapsed_hover:not(:hover) .ya-chat-button__container,.ya-chat-button_theme_light.ya-chat-button_collapsed_hover:not(:hover) .ya-chat-button__container{max-width:40px;padding-left:6px;padding-right:6px}.ya-chat-button_theme_dark.ya-chat-button_collapsed_hover:not(:hover) .ya-chat-button__container_size_large,.ya-chat-button_theme_light.ya-chat-button_collapsed_hover:not(:hover) .ya-chat-button__container_size_large{max-width:60px;padding-left:9px;padding-right:9px}.ya-chat-button_theme_dark.ya-chat-button_collapsed_hover:not(:hover) .ya-chat-button__text,.ya-chat-button_theme_light.ya-chat-button_collapsed_hover:not(:hover) .ya-chat-button__text{opacity:0}.ya-chat-button_theme_light .ya-chat-button__container{background-color:#fff}.ya-chat-button_theme_light .ya-chat-button__text{color:#292c33}.ya-chat-button_theme_dark .ya-chat-button__container{background-color:#292c33}.ya-chat-button_theme_dark .ya-chat-button__text{color:#fff}.ya-chat-button.ya-chat-button_theme_hidden{display:none}.ya-chat-icon{width:28px;height:28px;-webkit-flex:none;-ms-flex:none;flex:none;cursor:pointer;color:#4e66ff}.ya-chat-icon_theme-extended_happy_new_year{background-image:url(https://yastatic.net/s3/chat-static/spec/ny2019/ny-image-36.png);background-size:contain;background-repeat:no-repeat;background-position:50%;height:42px;width:42px}@media (-o-min-device-pixel-ratio:2/1),(-webkit-min-device-pixel-ratio:2),(min-resolution:192dpi){.ya-chat-icon_theme-extended_happy_new_year{background-image:url(https://yastatic.net/s3/chat-static/spec/ny2019/new-year-chats@2x.png)}}.ya-chat-icon_type_black{color:#000}.ya-chat-icon_type_white{color:#fff}.ya-chat-icon_size_large{height:42px;width:42px}.ya-chat-promo{position:absolute;top:-186px;right:-114px;-webkit-animation:circleLoad 10s cubic-bezier(.06,.91,.17,1) 2s;animation:circleLoad 10s cubic-bezier(.06,.91,.17,1) 2s;width:380px;height:380px;visibility:hidden;border-radius:100%;background-color:#65e6e6}.ya-chat-promo_hidden{-webkit-animation:none;animation:none;display:none}.ya-chat-promo__close-btn,.ya-chat-promo__text{position:absolute;opacity:0;-webkit-animation:contentLoad 9.7s linear 2.3s;animation:contentLoad 9.7s linear 2.3s}.ya-chat-promo__close-btn{top:40px;right:124px;color:#333;cursor:pointer}.ya-chat-promo__text{font-size:14px;font-weight:500;line-height:20px;top:94px;left:80px;max-width:180px;color:#000}@-webkit-keyframes circleLoad{0%{visibility:visible;-webkit-transform:scale(.4);transform:scale(.4)}6%{visibility:visible;-webkit-transform:scale(1);transform:scale(1)}to{visibility:hidden}}@keyframes circleLoad{0%{visibility:visible;-webkit-transform:scale(.4);transform:scale(.4)}6%{visibility:visible;-webkit-transform:scale(1);transform:scale(1)}to{visibility:hidden}}@-webkit-keyframes contentLoad{0%{opacity:0}6%{opacity:1}to{opacity:1}}@keyframes contentLoad{0%{opacity:0}6%{opacity:1}to{opacity:1}}.ya-chat-header{display:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative;width:100%;height:49px;border-bottom:1px solid #e6ebf1;border-top-left-radius:inherit;border-top-right-radius:inherit;background-color:#f3f5f8;visibility:hidden;-webkit-transition:visibility .4s ease;-o-transition:visibility ease .4s;transition:visibility .4s ease}.ya-chat-header__text{font-size:16px;font-weight:500;line-height:48px;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;max-width:100%;padding:0 48px 0 16px;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;color:#333;-webkit-user-select:none}.ya-chat-header__close{position:absolute;top:0;right:0;width:48px;height:100%;cursor:pointer;opacity:.8;background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='currentColor' clip-rule='evenodd' d='M19.207 6.207a1 1 0 00-1.414-1.414L12 10.586 6.207 4.793a1 1 0 00-1.414 1.414L10.586 12l-5.793 5.793a1 1 0 101.414 1.414L12 13.414l5.793 5.793a1 1 0 001.414-1.414L13.414 12l5.793-5.793z'/%3E%3C/svg%3E\") no-repeat 50%;background-size:50%}.ya-chat-header__close:hover{opacity:1}.ya-chat-header_visible{display:block;visibility:visible;-webkit-transition-delay:0s;-o-transition-delay:0s;transition-delay:0s}.ya-chat-header_hidden,.ya-chat-header_theme_hidden.ya-chat-header_empty,.ya-chat-header_theme_legacy.ya-chat-header_empty{display:none}.ya-chat-messenger-iframe{position:absolute;left:0;top:0;width:100%;height:100%;border:0;border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;display:none}.ya-chat-messenger-iframe_visible{display:block}.ya-chat-error{position:absolute;top:50%;left:50%;color:var(--yandex-mssngr-widget-error-text-color,#292c33);display:none;max-width:95%;padding:10px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center}.ya-chat-error_visible{display:block;z-index:11}.ya-chat-error__title{font-size:22.5px;font-weight:700;line-height:1.467;margin-bottom:12px;text-align:center}.ya-chat-error__button{font-size:14px;font-weight:500;line-height:36px;padding:0 16px;cursor:pointer;text-align:center;white-space:nowrap;letter-spacing:.5px;text-transform:uppercase;color:var(--yandex-mssngr-widget-error-button-color,#1c70c4);-webkit-tap-highlight-color:rgba(0,0,0,0)}.ya-chat-error_mobile{background-color:rgba(0,0,0,.05)}.ya-chat-error_theme_dark{color:var(--yandex-mssngr-widget-error-text-color,#fff)}.ya-chat-loader{position:absolute;top:0;right:0;bottom:0;left:0;opacity:0;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.ya-chat-loader__spinner{width:38px;height:38px;border-bottom:2px solid transparent;border-right:2px solid transparent;border-top:2px solid transparent;border-top-color:var(--yandex-mssngr-widget-spinner-color,#00a8a8);border-left:2px solid transparent;border-left-color:var(--yandex-mssngr-widget-spinner-color,#00a8a8);border-radius:50%}.ya-chat-loader_visible{opacity:1}.ya-chat-loader_visible .ya-chat-loader__spinner{-webkit-animation:ya-chat-loader-spinner-rotate 1s linear infinite;animation:ya-chat-loader-spinner-rotate 1s linear infinite}@-webkit-keyframes ya-chat-loader-spinner-rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes ya-chat-loader-spinner-rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.ya-chat-close{visibility:hidden;-webkit-transition:opacity .4s ease;-o-transition:opacity ease .4s;transition:opacity .4s ease;position:absolute;right:8px;top:8px;z-index:100;pointer-events:none}.ya-chat-close__button-box{position:relative;padding:4px;border-radius:50%;width:24px;height:24px;-webkit-box-sizing:content-box;box-sizing:content-box;cursor:pointer}.ya-chat-close__button-box:hover{background-color:#eff3f6}.ya-chat-close__button-box:active>*{opacity:.8}.ya-chat-close__button{width:100%;height:100%;background-size:100%;cursor:pointer;background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='currentColor' clip-rule='evenodd' d='M19.207 6.207a1 1 0 00-1.414-1.414L12 10.586 6.207 4.793a1 1 0 00-1.414 1.414L10.586 12l-5.793 5.793a1 1 0 101.414 1.414L12 13.414l5.793 5.793a1 1 0 001.414-1.414L13.414 12l5.793-5.793z'/%3E%3C/svg%3E\") no-repeat 50%}.ya-chat-close_visible{visibility:visible;pointer-events:auto}"},,,,function(e,t,n){n(46),e.exports=n(99)},function(e,t,n){"use strict";n.r(t);var o=n(72),i=n(11);n.d(t,"ChatWidget",function(){return i.a});var r=n(42),a=n(38),s=n(94);i.a.overrideOptions={styles:s},i.a.config=o.a,Object(r.b)(i.a),Object(a.a)("widget_ya",i.a.version)}])});